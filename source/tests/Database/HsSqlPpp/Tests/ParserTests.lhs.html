<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><title
    >ParserTests</title
    ><link href="../../../../../main.css" rel="stylesheet" type="text/css"
     /></head
  ><body
  ><div class="header"
    ><a href="../../../../../index.txt.html"
      >HsSqlPpp-0.3.0</a
      ></div
    ><br
     /><br
     /><br
     /><p
    >The automated tests, uses hunit to check a bunch of text expressions and sql statements parse to the correct tree, and then checks pretty printing and then reparsing gives the same tree. The code was mostly written almost in tdd style, which the order/ coverage of these tests reflects.</p
    ><p
    >There are no tests for invalid syntax at the moment.</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Comment">{-# LANGUAGE QuasiQuotes #-}</span>

<span class="Keyword">module</span> <span class="ConId">Database.HsSqlPpp.Tests.ParserTests</span> <span class="Symbol">(</span><span class="VarId">parserTests</span><span class="Symbol">,</span> <span class="VarId">parserTestData</span><span class="Symbol">,</span> <span class="ConId">Item</span><span class="Symbol">(..))</span> <span class="Keyword">where</span>

<span class="Keyword">import</span> <span class="ConId">Test.HUnit</span>
<span class="Keyword">import</span> <span class="ConId">Test.Framework</span>
<span class="Keyword">import</span> <span class="ConId">Test.Framework.Providers.HUnit</span>
<span class="Keyword">import</span> <span class="ConId">Data.Generics</span>

<span class="Keyword">import</span> <span class="ConId">Database.HsSqlPpp.Utils.Here</span>

<span class="Keyword">import</span> <span class="ConId">Database.HsSqlPpp.Ast</span>
<span class="Keyword">import</span> <span class="ConId">Database.HsSqlPpp.Annotation</span>
<span class="Keyword">import</span> <span class="ConId">Database.HsSqlPpp.Parser</span>
<span class="Keyword">import</span> <span class="ConId">Database.HsSqlPpp.PrettyPrinter</span>

<span class="Keyword">data</span> <span class="ConId">Item</span> <span class="Symbol">=</span> <span class="ConId">Expr</span> <span class="ConId">String</span> <span class="ConId">Expression</span>
          <span class="Symbol">|</span> <span class="ConId">Stmt</span> <span class="ConId">String</span> <span class="Symbol">[</span><span class="ConId">Statement</span><span class="Symbol">]</span>
          <span class="Symbol">|</span> <span class="ConId">PgSqlStmt</span> <span class="ConId">String</span> <span class="Symbol">[</span><span class="ConId">Statement</span><span class="Symbol">]</span>
          <span class="Symbol">|</span> <span class="ConId">Group</span> <span class="ConId">String</span> <span class="Symbol">[</span><span class="ConId">Item</span><span class="Symbol">]</span>
<span class="Function">parserTests</span> <span class="Symbol">::</span> <span class="ConId">Test.Framework.Test</span>
<span class="Function">parserTests</span> <span class="Symbol">=</span> <span class="VarId">itemToTft</span> <span class="VarId">parserTestData</span>

<span class="Function">parserTestData</span> <span class="Symbol">::</span> <span class="ConId">Item</span>
<span class="Function">parserTestData</span> <span class="Symbol">=</span>
  <span class="ConId">Group</span> <span class="String">&quot;parserTests&quot;</span> <span class="Symbol">[</span></pre></div></div></div><hr
     /><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="ConId">Group</span> <span class="String">&quot;parse expressions&quot;</span> <span class="Symbol">[</span>
    <span class="ConId">Group</span> <span class="String">&quot;basic expressions&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;1&quot;</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;-1&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;u-&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;1.1&quot;</span> <span class="Symbol">(</span><span class="ConId">FloatLit</span> <span class="VarId">ea</span> <span class="Number">1.1</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;-1.1&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;u-&quot;</span> <span class="Symbol">[</span><span class="ConId">FloatLit</span> <span class="VarId">ea</span> <span class="Number">1.1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot; 1 + 1 &quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;+&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span>
                                  <span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;1+1+1&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;+&quot;</span> <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;+&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span>
                                                <span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">]</span>
                                <span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;parens&quot;</span> <span class="Symbol">[</span></pre></div></div></div><p
    >check some basic parens use wrt naked values and row constructors these tests reflect how pg seems to interpret the variants.</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">      <span class="VarId">e</span> <span class="String">&quot;(1)&quot;</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;row ()&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span> <span class="Symbol">[])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;row (1)&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;row (1,2)&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;(1,2)&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">])</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;more basic expressions&quot;</span> <span class="Symbol">[</span></pre></div></div></div><p
    >test some more really basic expressions</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">      <span class="VarId">e</span> <span class="String">&quot;'test'&quot;</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;test&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;''&quot;</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;hello&quot;</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;hello&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;helloTest&quot;</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;helloTest&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;hello_test&quot;</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;hello_test&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;\&quot;this is an identifier\&quot;&quot;</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;this is an identifier&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;hello1234&quot;</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;hello1234&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;true&quot;</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;false&quot;</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">False</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;null&quot;</span> <span class="Symbol">(</span><span class="ConId">NullLit</span> <span class="VarId">ea</span><span class="Symbol">)</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;array ctor and selector&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;array[1,2]&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!arrayctor&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;a[1]&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!arraysub&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;simple operators&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;1 + tst1&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;+&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span>
                               <span class="Symbol">,</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;tst1&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;tst1 + 1&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;+&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;tst1&quot;</span>
                               <span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;tst + tst1&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;+&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;tst&quot;</span>
                                 <span class="Symbol">,</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;tst1&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;'a' || 'b'&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;||&quot;</span> <span class="Symbol">[</span><span class="VarId">stringQ</span> <span class="String">&quot;a&quot;</span>
                                  <span class="Symbol">,</span><span class="VarId">stringQ</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;'stuff'::text&quot;</span> <span class="Symbol">(</span><span class="ConId">Cast</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;stuff&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">))</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;245::float(24)&quot;</span> <span class="Symbol">(</span><span class="ConId">Cast</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">245</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">PrecTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;float&quot;</span> <span class="Number">24</span><span class="Symbol">))</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;245.1::numeric(5,3)&quot;</span> <span class="Symbol">(</span><span class="ConId">Cast</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">FloatLit</span> <span class="VarId">ea</span> <span class="Number">245.1</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">Prec2TypeName</span> <span class="VarId">ea</span> <span class="String">&quot;numeric&quot;</span> <span class="Number">5</span> <span class="Number">3</span><span class="Symbol">))</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;245::double precision&quot;</span> <span class="Symbol">(</span><span class="ConId">Cast</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">245</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;double precision&quot;</span><span class="Symbol">))</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;a between 1 and 3&quot;</span>
        <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!between&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;cast(a as text)&quot;</span>
        <span class="Symbol">(</span><span class="ConId">Cast</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">))</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;@ a&quot;</span>
        <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;@&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;substring(a from 0 for 3)&quot;</span>
        <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!substring&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">0</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;substring(a from 0 for (5 - 3))&quot;</span>
        <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!substring&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">0</span><span class="Symbol">,</span>
         <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;-&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">5</span><span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">]])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;a like b&quot;</span>
        <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!like&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;function calls&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;fn()&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;fn(1)&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;fn('test')&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[</span><span class="VarId">stringQ</span> <span class="String">&quot;test&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;fn(1,'test')&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span> <span class="VarId">stringQ</span> <span class="String">&quot;test&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;fn('test')&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[</span><span class="VarId">stringQ</span> <span class="String">&quot;test&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;simple whitespace sanity checks&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;fn (1)&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;fn( 1)&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;fn(1 )&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;fn(1) &quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;null stuff&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;not null&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!not&quot;</span> <span class="Symbol">[</span><span class="ConId">NullLit</span> <span class="VarId">ea</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;a is null&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!isnull&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;a is not null&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!isnotnull&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;not not true&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!not&quot;</span>
                         <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!not&quot;</span>
                          <span class="Symbol">[</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">]])</span>
     <span class="Symbol">]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;case expressions&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="Comment">{-&quot;case when a,b then 3\n\</span>
<span class="Comment">        \     when c then 4\n\</span>
<span class="Comment">        \     else 5\n\</span>
<span class="Comment">        \end&quot; -}</span>
        <span class="Symbol">[$</span><span class="VarId">here</span><span class="Symbol">|</span>
         <span class="Keyword">case</span> <span class="VarId">when</span> <span class="VarId">a</span><span class="Symbol">,</span><span class="VarId">b</span> <span class="Keyword">then</span> <span class="Number">3</span>
              <span class="VarId">when</span> <span class="VarId">c</span> <span class="Keyword">then</span> <span class="Number">4</span>
              <span class="Keyword">else</span> <span class="Number">5</span>
         <span class="VarId">end</span>
         <span class="Symbol">|]</span>
        <span class="Symbol">(</span><span class="ConId">Case</span> <span class="VarId">ea</span> <span class="Symbol">[([</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">],</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">)</span>
              <span class="Symbol">,([</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">],</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">4</span><span class="Symbol">)]</span>
         <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">5</span><span class="Symbol">))</span>
     <span class="Symbol">,</span><span class="VarId">e</span>  <span class="String">&quot;case 1 when 2 then 3 else 4 end&quot;</span>
        <span class="Symbol">(</span><span class="ConId">CaseSimple</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span>
           <span class="Symbol">[([</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">],</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">)]</span>
         <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">4</span><span class="Symbol">))</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;positional args&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;$1&quot;</span> <span class="Symbol">(</span><span class="ConId">PositionalArg</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;?&quot;</span> <span class="Symbol">(</span><span class="ConId">Placeholder</span> <span class="VarId">ea</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;a = ?&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span><span class="ConId">Placeholder</span> <span class="VarId">ea</span><span class="Symbol">])</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;exists&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;exists (select 1 from a)&quot;</span>
      <span class="Symbol">(</span><span class="ConId">Exists</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)))</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;in variants&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;t in (1,2)&quot;</span>
      <span class="Symbol">(</span><span class="ConId">InPredicate</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;t&quot;</span><span class="Symbol">)</span> <span class="ConId">True</span> <span class="Symbol">(</span><span class="ConId">InList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]))</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;t not in (1,2)&quot;</span>
      <span class="Symbol">(</span><span class="ConId">InPredicate</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;t&quot;</span><span class="Symbol">)</span> <span class="ConId">False</span> <span class="Symbol">(</span><span class="ConId">InList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]))</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;(t,u) in (1,2)&quot;</span>
      <span class="Symbol">(</span><span class="ConId">InPredicate</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;t&quot;</span><span class="Symbol">,</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;u&quot;</span><span class="Symbol">])</span> <span class="ConId">True</span>
       <span class="Symbol">(</span><span class="ConId">InList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]))</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;3 = any (array[1,2])&quot;</span>
      <span class="Symbol">(</span><span class="ConId">LiftOperator</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="ConId">LiftAny</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span>
                                    <span class="Symbol">,</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!arrayctor&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span>
                                                             <span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;3 = all (array[1,2,4])&quot;</span>
      <span class="Symbol">(</span><span class="ConId">LiftOperator</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="ConId">LiftAll</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span>
                                    <span class="Symbol">,</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!arrayctor&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span>
                                                             <span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span>
                                                             <span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">4</span><span class="Symbol">]])</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;comparison operators&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;a &lt; b&quot;</span>
      <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;&lt;&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;a &lt;&gt; b&quot;</span>
      <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;&lt;&gt;&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;a != b&quot;</span>
      <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;&lt;&gt;&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span>
     <span class="Symbol">]</span></pre></div></div></div><p
    >test some string parsing, want to check single quote behaviour, and dollar quoting, including nesting.</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;string parsing&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;''&quot;</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;''''&quot;</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;'&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;'test'''&quot;</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;test'&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;'''test'&quot;</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;'test&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;'te''st'&quot;</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;te'st&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;$$test$$&quot;</span> <span class="Symbol">(</span><span class="ConId">StringLit</span> <span class="VarId">ea</span> <span class="String">&quot;test&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;$$te'st$$&quot;</span> <span class="Symbol">(</span><span class="ConId">StringLit</span> <span class="VarId">ea</span> <span class="String">&quot;te'st&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;$st$test$st$&quot;</span> <span class="Symbol">(</span><span class="ConId">StringLit</span> <span class="VarId">ea</span> <span class="String">&quot;test&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;$outer$te$$yup$$st$outer$&quot;</span> <span class="Symbol">(</span><span class="ConId">StringLit</span> <span class="VarId">ea</span> <span class="String">&quot;te$$yup$$st&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;'spl$$it'&quot;</span> <span class="Symbol">(</span><span class="VarId">stringQ</span> <span class="String">&quot;spl$$it&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;bracketed things&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">e</span> <span class="String">&quot;(p).x&quot;</span> <span class="Symbol">(</span><span class="VarId">qi</span> <span class="String">&quot;p&quot;</span> <span class="String">&quot;x&quot;</span><span class="Symbol">)</span>
     <span class="Symbol">,</span><span class="VarId">e</span> <span class="String">&quot;(select f(((a).x, y)::z))&quot;</span>
        <span class="Symbol">(</span><span class="ConId">ScalarSubQuery</span> <span class="VarId">ea</span>
         <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">(</span><span class="VarId">sl</span>
                   <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span>
                    <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;f&quot;</span> <span class="Symbol">[</span><span class="ConId">Cast</span> <span class="VarId">ea</span>
                                     <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span>
                                      <span class="Symbol">[</span><span class="VarId">qi</span> <span class="String">&quot;a&quot;</span> <span class="String">&quot;x&quot;</span>
                                      <span class="Symbol">,</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;y&quot;</span><span class="Symbol">])</span>
                                     <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;z&quot;</span><span class="Symbol">)])])))</span>
     <span class="Symbol">]</span>
     <span class="Symbol">]</span></pre></div></div></div><hr
     /><p
    >select statements</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">  <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;simple select statements&quot;</span> <span class="Symbol">[</span>
    <span class="ConId">Group</span> <span class="String">&quot;select no table&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;select 1;&quot;</span> <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectE</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]</span> <span class="Symbol">[])]</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;select from table&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;select * from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a,b from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a,b from inf.tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">qi</span> <span class="String">&quot;inf&quot;</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select distinct * from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Distinct</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">[])</span> <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span>
       <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from tbl where b=2;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFromWhere</span>
        <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
        <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
        <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span>
         <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">])]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from tbl where b=2 and c=3;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFromWhere</span>
        <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
        <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
        <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!and&quot;</span>
         <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span>  <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]</span>
         <span class="Symbol">,</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">]])]</span>
     <span class="Symbol">]</span>
</pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;more select statements&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;select a from tbl\n\
        \except\n\
        \select a from tbl1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">Except</span>
       <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))</span>
       <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl1&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from tbl where true\n\
        \except\n\
        \select a from tbl1 where true;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">Except</span>
       <span class="Symbol">(</span><span class="VarId">selectFromWhere</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">))</span>
       <span class="Symbol">(</span><span class="VarId">selectFromWhere</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl1&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from tbl\n\
        \union\n\
        \select a from tbl1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">Union</span>
       <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))</span>
       <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl1&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from tbl\n\
        \union all\n\
        \select a from tbl1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">UnionAll</span>
       <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))</span>
       <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl1&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;(select 1 union select 2) union select 3;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
       <span class="Symbol">(</span><span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">Union</span>
        <span class="Symbol">(</span><span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">Union</span>
         <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]</span> <span class="Symbol">[]))</span>
         <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">)]</span> <span class="Symbol">[])))</span>
        <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">)]</span> <span class="Symbol">[])))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select 1 union (select 2 union select 3);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
       <span class="Symbol">(</span><span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">Union</span>
        <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]</span> <span class="Symbol">[]))</span>
        <span class="Symbol">(</span><span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">Union</span>
         <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">)]</span> <span class="Symbol">[]))</span>
         <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">)]</span> <span class="Symbol">[]))))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="Symbol">[$</span><span class="VarId">here</span><span class="Symbol">|</span>
         <span class="VarId">with</span> <span class="VarId">a</span> <span class="Keyword">as</span> <span class="Symbol">(</span><span class="VarId">select</span> <span class="Number">1</span> <span class="Keyword">as</span> <span class="VarId">a1</span><span class="Symbol">),</span>
              <span class="VarId">b</span> <span class="Keyword">as</span> <span class="Symbol">(</span><span class="VarId">select</span> <span class="Symbol">*</span> <span class="VarId">from</span> <span class="VarId">a</span><span class="Symbol">)</span>
              <span class="VarId">select</span> <span class="Symbol">*</span> <span class="VarId">from</span> <span class="VarId">b</span><span class="Symbol">;</span> <span class="Symbol">|]</span>
         <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
          <span class="Symbol">(</span><span class="ConId">WithSelect</span> <span class="VarId">ea</span>
           <span class="Symbol">[</span><span class="ConId">WithQuery</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="ConId">SelectList</span> <span class="VarId">ea</span>
                               <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span> <span class="String">&quot;a1&quot;</span><span class="Symbol">]</span> <span class="Symbol">[])</span>
           <span class="Symbol">,</span><span class="ConId">WithQuery</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span> <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
           <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="Symbol">[$</span><span class="VarId">here</span><span class="Symbol">|</span>
         <span class="VarId">with</span> <span class="VarId">a</span> <span class="Keyword">as</span> <span class="Symbol">(</span><span class="VarId">select</span> <span class="Number">1</span> <span class="Keyword">as</span> <span class="VarId">a1</span><span class="Symbol">),</span>
              <span class="VarId">b</span> <span class="Keyword">as</span> <span class="Symbol">(</span><span class="VarId">select</span> <span class="Symbol">*</span> <span class="VarId">from</span> <span class="VarId">a</span><span class="Symbol">)</span>
              <span class="VarId">select</span> <span class="Symbol">*</span> <span class="VarId">from</span> <span class="VarId">a</span>
              <span class="VarId">union</span> <span class="VarId">select</span> <span class="Symbol">*</span> <span class="VarId">from</span> <span class="VarId">b</span><span class="Symbol">;</span> <span class="Symbol">|]</span>
         <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
          <span class="Symbol">(</span><span class="ConId">WithSelect</span> <span class="VarId">ea</span>
           <span class="Symbol">[</span><span class="ConId">WithQuery</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="ConId">SelectList</span> <span class="VarId">ea</span>
                               <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span> <span class="String">&quot;a1&quot;</span><span class="Symbol">]</span> <span class="Symbol">[])</span>
           <span class="Symbol">,</span><span class="ConId">WithQuery</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span> <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
           <span class="Symbol">(</span><span class="ConId">CombineSelect</span> <span class="VarId">ea</span> <span class="ConId">Union</span>
             <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))</span>
             <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a as b from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a + b as b from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;+&quot;</span>
         <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a.* from tbl a;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selEL</span> <span class="Symbol">[</span><span class="VarId">qi</span> <span class="String">&quot;a&quot;</span> <span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">TableAlias</span> <span class="String">&quot;a&quot;</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a.* from tbl a(b,c);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selEL</span> <span class="Symbol">[</span><span class="VarId">qi</span> <span class="String">&quot;a&quot;</span> <span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">FullAlias</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">[</span><span class="String">&quot;b&quot;</span><span class="Symbol">,</span><span class="String">&quot;c&quot;</span><span class="Symbol">]))]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from t1 a, t2 b;&quot;</span>
            <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
             <span class="Symbol">(</span><span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span>
              <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span>
               <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;*&quot;</span><span class="Symbol">)]</span> <span class="Symbol">[])</span>
              <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;t1&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">TableAlias</span> <span class="String">&quot;a&quot;</span><span class="Symbol">),</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;t2&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">TableAlias</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)]</span>
              <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b inner join c on b.a=c.a;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Unnatural</span> <span class="ConId">Inner</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">(</span><span class="ConId">JoinOn</span> <span class="VarId">ea</span>
           <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="VarId">qi</span> <span class="String">&quot;b&quot;</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="VarId">qi</span> <span class="String">&quot;c&quot;</span> <span class="String">&quot;a&quot;</span><span class="Symbol">])))</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b inner join c as d on b.a=d.a;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Unnatural</span> <span class="ConId">Inner</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">TableAlias</span> <span class="String">&quot;d&quot;</span><span class="Symbol">))</span>
          <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">(</span><span class="ConId">JoinOn</span> <span class="VarId">ea</span>
           <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="VarId">qi</span> <span class="String">&quot;b&quot;</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="VarId">qi</span> <span class="String">&quot;d&quot;</span> <span class="String">&quot;a&quot;</span><span class="Symbol">])))</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b inner join c using(d,e);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Unnatural</span> <span class="ConId">Inner</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">(</span><span class="ConId">JoinUsing</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="String">&quot;d&quot;</span><span class="Symbol">,</span><span class="String">&quot;e&quot;</span><span class="Symbol">]))</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b natural inner join c;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Natural</span> <span class="ConId">Inner</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b left outer join c;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Unnatural</span> <span class="ConId">LeftOuter</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b full outer join c;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Unnatural</span> <span class="ConId">FullOuter</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b right outer join c;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Unnatural</span> <span class="ConId">RightOuter</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b cross join c;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Unnatural</span> <span class="ConId">Cross</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from (b natural join c);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Natural</span> <span class="ConId">Inner</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select x from a cross join b cross join c;&quot;</span>
       <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">])</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
           <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
         <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select x from ((a cross join b) cross join c);&quot;</span>
       <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">])</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
           <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
         <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select x from (a cross join (b cross join c));&quot;</span>
       <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">])</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
          <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
           <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
           <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
           <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
           <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select x from ((a cross join b) cross join c);&quot;</span>
       <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">])</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
           <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
         <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select x from (a cross join b) cross join c;&quot;</span>
       <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">])</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
           <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
         <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select x from ((a cross join b) cross join c) cross join d;&quot;</span>
       <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">])</span>
         <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
          <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
           <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
            <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
            <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
            <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
            <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
           <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
           <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
           <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="ConId">Unnatural</span> <span class="ConId">Cross</span>
          <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;d&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
          <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from b\n\
        \    inner join c\n\
        \      on true\n\
        \    inner join d\n\
        \      on 1=1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)]</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Unnatural</span> <span class="ConId">Inner</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">JoinOn</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">))</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
        <span class="ConId">Unnatural</span> <span class="ConId">Inner</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;d&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
        <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">JoinOn</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span>
               <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">]))</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select row_number() over(order by a) as place from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span>
                   <span class="Symbol">(</span><span class="ConId">WindowFn</span> <span class="VarId">ea</span>
                    <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;row_number&quot;</span> <span class="Symbol">[])</span>
                    <span class="Symbol">[]</span>
                    <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span> <span class="ConId">Asc</span> <span class="ConId">FrameUnboundedPreceding</span><span class="Symbol">)</span>
                   <span class="String">&quot;place&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select row_number() over(order by a asc) as place from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span>
                   <span class="Symbol">(</span><span class="ConId">WindowFn</span> <span class="VarId">ea</span>
                    <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;row_number&quot;</span> <span class="Symbol">[])</span>
                    <span class="Symbol">[]</span>
                    <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span> <span class="ConId">Asc</span> <span class="ConId">FrameUnboundedPreceding</span><span class="Symbol">)</span>
                   <span class="String">&quot;place&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select row_number() over(order by a desc) as place from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span>
                   <span class="Symbol">(</span><span class="ConId">WindowFn</span> <span class="VarId">ea</span>
                    <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;row_number&quot;</span> <span class="Symbol">[])</span>
                    <span class="Symbol">[]</span>
                    <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span> <span class="ConId">Desc</span> <span class="ConId">FrameUnboundedPreceding</span><span class="Symbol">)</span>
                   <span class="String">&quot;place&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select row_number()\n\
        \over(partition by (a,b) order by c) as place\n\
        \from tbl;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span>
                   <span class="Symbol">(</span><span class="ConId">WindowFn</span> <span class="VarId">ea</span>
                    <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;row_number&quot;</span> <span class="Symbol">[])</span>
                    <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]]</span>
                    <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">]</span> <span class="ConId">Asc</span> <span class="ConId">FrameUnboundedPreceding</span><span class="Symbol">)</span>
                   <span class="String">&quot;place&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from a natural inner join (select * from b) as a;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">JoinedTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="ConId">Natural</span>
        <span class="ConId">Inner</span> <span class="Symbol">(</span><span class="ConId">SubTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">selectFrom</span>
                        <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span>
                        <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))</span> <span class="Symbol">(</span><span class="ConId">TableAlias</span> <span class="String">&quot;a&quot;</span><span class="Symbol">))</span>
        <span class="ConId">Nothing</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from a order by c;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span>  <span class="ConId">Dupes</span>
       <span class="Symbol">(</span><span class="VarId">sl</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">]))</span>
       <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span>
       <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span><span class="ConId">Asc</span><span class="Symbol">)]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select *\n\
           \from Adventure\n\
           \order by Clicks desc, AdventureID;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span>
       <span class="Symbol">(</span><span class="VarId">sl</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">]))</span>
       <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;Adventure&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span>
       <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;Clicks&quot;</span><span class="Symbol">,</span><span class="ConId">Desc</span><span class="Symbol">)</span>
                          <span class="Symbol">,(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;AdventureID&quot;</span><span class="Symbol">,</span><span class="ConId">Asc</span><span class="Symbol">)]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from a order by c,d asc;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span>
       <span class="Symbol">(</span><span class="VarId">sl</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">]))</span>
       <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span>
       <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span> <span class="ConId">Asc</span><span class="Symbol">)</span>
                          <span class="Symbol">,(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;d&quot;</span><span class="Symbol">,</span> <span class="ConId">Asc</span><span class="Symbol">)]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from a order by c,d desc;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span>
       <span class="Symbol">(</span><span class="VarId">sl</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">]))</span>
       <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span>
       <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span> <span class="ConId">Asc</span><span class="Symbol">)</span>
                          <span class="Symbol">,(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;d&quot;</span><span class="Symbol">,</span> <span class="ConId">Desc</span><span class="Symbol">)]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from a order by c limit 1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span>
       <span class="Symbol">(</span><span class="VarId">sl</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">]))</span>
       <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span>
       <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span><span class="ConId">Asc</span><span class="Symbol">)]</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">))</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from a order by c offset 3;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span>
       <span class="Symbol">(</span><span class="VarId">sl</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">]))</span>
       <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span>
       <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span><span class="ConId">Asc</span><span class="Symbol">)]</span> <span class="ConId">Nothing</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from (select b from c) as d;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
         <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">])</span>
         <span class="Symbol">(</span><span class="ConId">SubTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">selectFrom</span>
                   <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;b&quot;</span><span class="Symbol">])</span>
                   <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))</span>
          <span class="Symbol">(</span><span class="ConId">TableAlias</span> <span class="String">&quot;d&quot;</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from gen();&quot;</span>
        <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span> <span class="Symbol">(</span><span class="ConId">TrefFun</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;gen&quot;</span> <span class="Symbol">[])</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select * from gen() as t;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">(</span><span class="VarId">selIL</span> <span class="Symbol">[</span><span class="String">&quot;*&quot;</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">TrefFun</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;gen&quot;</span> <span class="Symbol">[])(</span><span class="ConId">TableAlias</span>  <span class="String">&quot;t&quot;</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a, count(b) from c group by a;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span>
         <span class="Symbol">(</span><span class="VarId">sl</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;count&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])])</span>
         <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span> <span class="ConId">Nothing</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span>
         <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a, count(b) as cnt from c group by a having cnt &gt; 4;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span>
         <span class="Symbol">(</span><span class="VarId">sl</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">SelectItem</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;count&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span> <span class="String">&quot;cnt&quot;</span><span class="Symbol">])</span>
         <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span> <span class="ConId">Nothing</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;&gt;&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;cnt&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">4</span><span class="Symbol">])</span>
         <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select a from (select 1 as a, 2 as b) x;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
         <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">(</span><span class="ConId">SubTref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="ConId">SelectList</span> <span class="VarId">ea</span>
                               <span class="Symbol">[</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span> <span class="String">&quot;a&quot;</span>
                               <span class="Symbol">,</span><span class="ConId">SelectItem</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">)</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span> <span class="Symbol">[])</span>
                  <span class="Symbol">(</span><span class="ConId">TableAlias</span> <span class="String">&quot;x&quot;</span><span class="Symbol">))]</span>
     <span class="Symbol">]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;multiple statements&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;select 1;\nselect 2;&quot;</span> <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]</span>
                               <span class="Symbol">,</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">)]]</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;comments&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;&quot;</span> <span class="Symbol">[]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;-- this is a test&quot;</span> <span class="Symbol">[]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;/* this is\n\
        \a test*/&quot;</span> <span class="Symbol">[]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select 1;\n\
        \-- this is a test\n\
        \select -- this is a test\n\
        \2;&quot;</span> <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]</span>
             <span class="Symbol">,</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">)]</span>
             <span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select 1;\n\
        \/* this is\n\
        \a test*/\n\
        \select /* this is a test*/2;&quot;</span>
                    <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]</span>
                    <span class="Symbol">,</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectE</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">)]</span>
                    <span class="Symbol">]</span>
     <span class="Symbol">]</span>
   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;some mis stuff&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;select (p).x, (p).y from pos;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selEL</span> <span class="Symbol">[</span><span class="VarId">qi</span> <span class="String">&quot;p&quot;</span> <span class="String">&quot;x&quot;</span>
                                                <span class="Symbol">,</span><span class="VarId">qi</span> <span class="String">&quot;p&quot;</span> <span class="String">&quot;y&quot;</span><span class="Symbol">])</span>
                                         <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;pos&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select ($1).x, ($1).y from pos;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">(</span><span class="VarId">selEL</span> <span class="Symbol">[</span><span class="ConId">QIdentifier</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">PositionalArg</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span> <span class="String">&quot;x&quot;</span>
                                                <span class="Symbol">,</span><span class="ConId">QIdentifier</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">PositionalArg</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span> <span class="String">&quot;y&quot;</span><span class="Symbol">])</span>
                                         <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;pos&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;select row_number() over(), x from tb;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span>
       <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span>
                    <span class="Symbol">(</span><span class="ConId">WindowFn</span> <span class="VarId">ea</span>
                    <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;row_number&quot;</span> <span class="Symbol">[])</span>
                    <span class="Symbol">[]</span>
                    <span class="Symbol">[]</span> <span class="ConId">Asc</span> <span class="ConId">FrameUnboundedPreceding</span><span class="Symbol">)</span>
       <span class="Symbol">,</span> <span class="VarId">selI</span> <span class="String">&quot;x&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tb&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">]</span>
     <span class="Symbol">]</span></pre></div></div></div><p
    >TODO:</p
    ><p
    >from in update, using in delete (+ type check these)</p
    ><hr
     /><p
    >dml statements</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;dml&quot;</span> <span class="Symbol">[</span>
     <span class="ConId">Group</span> <span class="String">&quot;insert&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;insert into testtable\n\
        \(columna,columnb)\n\
        \values (1,2);\n&quot;</span>
       <span class="Symbol">[</span><span class="ConId">Insert</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;testtable&quot;</span><span class="Symbol">)</span>
        <span class="Symbol">[</span><span class="String">&quot;columna&quot;</span><span class="Symbol">,</span> <span class="String">&quot;columnb&quot;</span><span class="Symbol">]</span>
        <span class="Symbol">(</span><span class="ConId">Values</span> <span class="VarId">ea</span> <span class="Symbol">[[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]])</span>
        <span class="ConId">Nothing</span><span class="Symbol">]</span></pre></div></div></div><p
    >multi row insert, test the stand alone values statement first, maybe that should be in the select section?</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;values (1,2), (3,4);&quot;</span>
     <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Values</span> <span class="VarId">ea</span> <span class="Symbol">[[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]</span>
             <span class="Symbol">,[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">4</span><span class="Symbol">]]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;insert into testtable\n\
        \(columna,columnb)\n\
        \values (1,2), (3,4);\n&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Insert</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;testtable&quot;</span><span class="Symbol">)</span>
        <span class="Symbol">[</span><span class="String">&quot;columna&quot;</span><span class="Symbol">,</span> <span class="String">&quot;columnb&quot;</span><span class="Symbol">]</span>
        <span class="Symbol">(</span><span class="ConId">Values</span> <span class="VarId">ea</span> <span class="Symbol">[[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]</span>
                <span class="Symbol">,[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">4</span><span class="Symbol">]])</span>
        <span class="ConId">Nothing</span><span class="Symbol">]</span></pre></div></div></div><p
    >insert from select</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;insert into a\n\
         \    select b from c;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Insert</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span> <span class="Symbol">[]</span>
       <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))</span>
       <span class="ConId">Nothing</span><span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;insert into testtable\n\
        \(columna,columnb)\n\
        \values (1,2) returning id;\n&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Insert</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;testtable&quot;</span><span class="Symbol">)</span>
        <span class="Symbol">[</span><span class="String">&quot;columna&quot;</span><span class="Symbol">,</span> <span class="String">&quot;columnb&quot;</span><span class="Symbol">]</span>
        <span class="Symbol">(</span><span class="ConId">Values</span> <span class="VarId">ea</span> <span class="Symbol">[[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]])</span>
        <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;id&quot;</span><span class="Symbol">])]</span>
     <span class="Symbol">]</span>

    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;update&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;update tb\n\
        \  set x = 1, y = 2;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Update</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tb&quot;</span><span class="Symbol">)</span> <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">]</span>
                      <span class="Symbol">,</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;y&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]]</span>
       <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;update tb\n\
        \  set x = 1, y = 2 where z = true;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Update</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tb&quot;</span><span class="Symbol">)</span> <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">]</span>
                      <span class="Symbol">,</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;y&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]]</span>
       <span class="Symbol">[]</span>
       <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span>
        <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;z&quot;</span><span class="Symbol">,</span> <span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">])</span>
       <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;update tb\n\
        \  set x = 1, y = 2 returning id;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Update</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tb&quot;</span><span class="Symbol">)</span> <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">]</span>
                      <span class="Symbol">,</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;y&quot;</span><span class="Symbol">,</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]]</span>
       <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;id&quot;</span><span class="Symbol">])]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;update pieces\n\
        \set a=b returning tag into r.tag;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Update</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;pieces&quot;</span><span class="Symbol">)</span> <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span>
                                          <span class="Symbol">,</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]]</span>
       <span class="Symbol">[]</span>
       <span class="ConId">Nothing</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span>
                      <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;tag&quot;</span><span class="Symbol">)]</span>
                      <span class="Symbol">[</span><span class="VarId">qi</span> <span class="String">&quot;r&quot;</span> <span class="String">&quot;tag&quot;</span><span class="Symbol">]))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;update tb\n\
        \  set (x,y) = (1,2);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Update</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tb&quot;</span><span class="Symbol">)</span> <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span>
                       <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span>
                                              <span class="Symbol">,</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;y&quot;</span><span class="Symbol">]</span>
                       <span class="Symbol">,</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;!rowctor&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span>
                                              <span class="Symbol">,</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">2</span><span class="Symbol">]]]</span>
       <span class="Symbol">[]</span>
       <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">]</span></pre></div></div></div><p
    >FunCall ea &quot;=&quot; [FunCall ea &quot;!rowctor&quot; [Identifier ea &quot;x&quot;,Identifier ea &quot;y&quot;],FunCall ea &quot;!rowctor&quot; [IntegerLit ea 1,IntegerLit ea 2]])</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">
    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;delete&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;delete from tbl1 where x = true;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Delete</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl1&quot;</span><span class="Symbol">)</span> <span class="Symbol">[]</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span>
                               <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">])</span>
       <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;delete from tbl1 where x = true returning id;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Delete</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl1&quot;</span><span class="Symbol">)</span> <span class="Symbol">[]</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span>
                               <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">])</span>
       <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="VarId">sl</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;id&quot;</span><span class="Symbol">])]</span>
     <span class="Symbol">]</span>

    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;truncate&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;truncate test;&quot;</span>
       <span class="Symbol">[</span><span class="ConId">Truncate</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="String">&quot;test&quot;</span><span class="Symbol">]</span> <span class="ConId">ContinueIdentity</span> <span class="ConId">Restrict</span><span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;truncate table test, test2 restart identity cascade;&quot;</span>
       <span class="Symbol">[</span><span class="ConId">Truncate</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="String">&quot;test&quot;</span><span class="Symbol">,</span><span class="String">&quot;test2&quot;</span><span class="Symbol">]</span> <span class="ConId">RestartIdentity</span> <span class="ConId">Cascade</span><span class="Symbol">]</span>
     <span class="Symbol">]</span></pre></div></div></div><p
    >copy, bit crap at the moment</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;copy&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;copy tbl(a,b) from stdin;\n\
        \bat\tt\n\
        \bear\tf\n\
        \\\.\n&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Copy</span> <span class="VarId">ea</span> <span class="String">&quot;tbl&quot;</span> <span class="Symbol">[</span><span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span> <span class="ConId">Stdin</span>
       <span class="Symbol">,</span><span class="ConId">CopyData</span> <span class="VarId">ea</span> <span class="String">&quot;\
        \bat\tt\n\
        \bear\tf\n&quot;</span><span class="Symbol">]</span>
     <span class="Symbol">]</span></pre></div></div></div><hr
     /><p
    >ddl statements</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;ddl&quot;</span> <span class="Symbol">[</span>
     <span class="ConId">Group</span> <span class="String">&quot;simple tables&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create table test (\n\
        \  fielda text,\n\
        \  fieldb int\n\
        \);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span>
       <span class="String">&quot;test&quot;</span>
       <span class="Symbol">[</span><span class="VarId">att</span> <span class="String">&quot;fielda&quot;</span> <span class="String">&quot;text&quot;</span>
       <span class="Symbol">,</span><span class="VarId">att</span> <span class="String">&quot;fieldb&quot;</span> <span class="String">&quot;int&quot;</span>
       <span class="Symbol">]</span>
       <span class="Symbol">[]]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table tbl (\n\
        \  fld boolean default false);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;tbl&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;fld&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;boolean&quot;</span><span class="Symbol">)</span>
                          <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">False</span><span class="Symbol">)</span> <span class="Symbol">[]][]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table tbl as select 1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateTableAs</span> <span class="VarId">ea</span> <span class="String">&quot;tbl&quot;</span>
       <span class="Symbol">(</span><span class="VarId">selectE</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]</span> <span class="Symbol">[]))]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;alter table a alter column b set default 1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">AlterTable</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">[</span><span class="ConId">AlterColumnDefault</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;alter table a add constraint unique(b);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">AlterTable</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">[</span><span class="ConId">AddConstraint</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">UniqueConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">[</span><span class="String">&quot;b&quot;</span><span class="Symbol">])]]</span>
     <span class="Symbol">]]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">
    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;others&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create view v1 as\n\
        \select a,b from t;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateView</span> <span class="VarId">ea</span>
       <span class="String">&quot;v1&quot;</span>
       <span class="Symbol">(</span><span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="VarId">selI</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;t&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create domain td as text check (value in ('t1', 't2'));&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateDomain</span> <span class="VarId">ea</span> <span class="String">&quot;td&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span> <span class="String">&quot;&quot;</span>
       <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">(</span><span class="ConId">InPredicate</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;value&quot;</span><span class="Symbol">)</span> <span class="ConId">True</span>
              <span class="Symbol">(</span><span class="ConId">InList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="VarId">stringQ</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">,</span><span class="VarId">stringQ</span> <span class="String">&quot;t2&quot;</span><span class="Symbol">])))]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create type tp1 as (\n\
        \  f1 text,\n\
        \  f2 text\n\
        \);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateType</span> <span class="VarId">ea</span> <span class="String">&quot;tp1&quot;</span> <span class="Symbol">[</span><span class="ConId">TypeAttDef</span> <span class="VarId">ea</span> <span class="String">&quot;f1&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span>
                        <span class="Symbol">,</span><span class="ConId">TypeAttDef</span> <span class="VarId">ea</span> <span class="String">&quot;f2&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create sequence s start with 5 increment by 4 no maxvalue no minvalue cache 1;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateSequence</span> <span class="VarId">ea</span> <span class="String">&quot;s&quot;</span> <span class="Number">4</span> <span class="Number">1</span> <span class="Symbol">((</span><span class="Number">2</span><span class="Symbol">::</span><span class="ConId">Integer</span><span class="Symbol">)</span> <span class="Symbol">^</span> <span class="Symbol">(</span><span class="Number">63</span><span class="Symbol">::</span><span class="ConId">Integer</span><span class="Symbol">)</span> <span class="Symbol">-</span> <span class="Number">1</span><span class="Symbol">)</span> <span class="Number">5</span> <span class="Number">1</span><span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;alter sequence s owned by a.b;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">AlterSequence</span> <span class="VarId">ea</span> <span class="String">&quot;s&quot;</span> <span class="Symbol">$</span> <span class="VarId">qi</span> <span class="String">&quot;a&quot;</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create trigger tr\n\
         \after insert or delete on tb\n\
         \for each statement\n\
         \execute procedure fb();&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTrigger</span> <span class="VarId">ea</span> <span class="String">&quot;tr&quot;</span> <span class="ConId">TriggerAfter</span> <span class="Symbol">[</span><span class="ConId">TInsert</span><span class="Symbol">,</span><span class="ConId">TDelete</span><span class="Symbol">]</span> <span class="String">&quot;tb&quot;</span> <span class="ConId">EachStatement</span> <span class="String">&quot;fb&quot;</span> <span class="Symbol">[]]</span>
     <span class="Symbol">]</span>

    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;drops&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;drop domain t;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropSomething</span> <span class="VarId">ea</span> <span class="ConId">Domain</span> <span class="ConId">Require</span> <span class="Symbol">[</span><span class="String">&quot;t&quot;</span><span class="Symbol">]</span> <span class="ConId">Restrict</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;drop domain if exists t,u cascade;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropSomething</span> <span class="VarId">ea</span> <span class="ConId">Domain</span> <span class="ConId">IfExists</span> <span class="Symbol">[</span><span class="String">&quot;t&quot;</span><span class="Symbol">,</span> <span class="String">&quot;u&quot;</span><span class="Symbol">]</span> <span class="ConId">Cascade</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;drop domain t restrict;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropSomething</span> <span class="VarId">ea</span> <span class="ConId">Domain</span> <span class="ConId">Require</span> <span class="Symbol">[</span><span class="String">&quot;t&quot;</span><span class="Symbol">]</span> <span class="ConId">Restrict</span><span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;drop type t;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropSomething</span> <span class="VarId">ea</span> <span class="ConId">Type</span> <span class="ConId">Require</span> <span class="Symbol">[</span><span class="String">&quot;t&quot;</span><span class="Symbol">]</span> <span class="ConId">Restrict</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;drop table t;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropSomething</span> <span class="VarId">ea</span> <span class="ConId">Table</span> <span class="ConId">Require</span> <span class="Symbol">[</span><span class="String">&quot;t&quot;</span><span class="Symbol">]</span> <span class="ConId">Restrict</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;drop view t;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropSomething</span> <span class="VarId">ea</span> <span class="ConId">View</span> <span class="ConId">Require</span> <span class="Symbol">[</span><span class="String">&quot;t&quot;</span><span class="Symbol">]</span> <span class="ConId">Restrict</span><span class="Symbol">]</span>
     <span class="Symbol">]</span>

    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;constraints&quot;</span> <span class="Symbol">[</span>
      <span class="ConId">Group</span> <span class="String">&quot;nulls&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ a text null\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span>
                           <span class="ConId">Nothing</span> <span class="Symbol">[</span><span class="ConId">NullConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span><span class="Symbol">]]</span>
         <span class="Symbol">[]]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ a text not null\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span>
                           <span class="ConId">Nothing</span> <span class="Symbol">[</span><span class="ConId">NotNullConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span><span class="Symbol">]]</span>
         <span class="Symbol">[]]</span>
     <span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;unique&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int,\n\
        \ y int,\n\
        \ unique (x,y)\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="VarId">att</span> <span class="String">&quot;x&quot;</span> <span class="String">&quot;int&quot;</span>
                          <span class="Symbol">,</span><span class="VarId">att</span> <span class="String">&quot;y&quot;</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">UniqueConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">,</span><span class="String">&quot;y&quot;</span><span class="Symbol">]]]</span></pre></div></div></div><p
    >test arbitrary ordering</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int,\n\
        \ unique (x),\n\
        \ y int\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="VarId">att</span> <span class="String">&quot;x&quot;</span> <span class="String">&quot;int&quot;</span>
                          <span class="Symbol">,</span><span class="VarId">att</span> <span class="String">&quot;y&quot;</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">UniqueConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">]]]</span></pre></div></div></div><p
    >unique row</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int unique\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">RowUniqueConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span><span class="Symbol">]][]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int unique not null\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">RowUniqueConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span>
                           <span class="Symbol">,</span><span class="ConId">NotNullConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span><span class="Symbol">]][]]</span></pre></div></div></div><p
    >quick sanity check</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int not null unique\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">NotNullConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span>
                           <span class="Symbol">,</span><span class="ConId">RowUniqueConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span><span class="Symbol">]][]]</span>
     <span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;primary key&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int primary key\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">RowPrimaryKeyConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span><span class="Symbol">]][]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int,\n\
        \ y int,\n\
        \ primary key (x,y)\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="VarId">att</span> <span class="String">&quot;x&quot;</span> <span class="String">&quot;int&quot;</span>
                          <span class="Symbol">,</span><span class="VarId">att</span> <span class="String">&quot;y&quot;</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">PrimaryKeyConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="String">&quot;y&quot;</span><span class="Symbol">]]]</span>
     <span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;check&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create table t (\n\
        \f text check (f in('a', 'b'))\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t&quot;</span>
         <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;f&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
          <span class="Symbol">[</span><span class="ConId">RowCheckConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">(</span><span class="ConId">InPredicate</span> <span class="VarId">ea</span>
                                  <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;f&quot;</span><span class="Symbol">)</span> <span class="ConId">True</span>
                                  <span class="Symbol">(</span><span class="ConId">InList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="VarId">stringQ</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="VarId">stringQ</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]))]]</span> <span class="Symbol">[]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int,\n\
        \ y int,\n\
        \ check (x&gt;y)\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="VarId">att</span> <span class="String">&quot;x&quot;</span> <span class="String">&quot;int&quot;</span>
                          <span class="Symbol">,</span><span class="VarId">att</span> <span class="String">&quot;y&quot;</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">CheckConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;&gt;&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;y&quot;</span><span class="Symbol">])]]</span>
     <span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;misc&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create table t (\n\
        \f text not null unique check (f in('a', 'b'))\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t&quot;</span>
         <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;f&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
          <span class="Symbol">[</span><span class="ConId">NotNullConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span>
           <span class="Symbol">,</span><span class="ConId">RowUniqueConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span>
           <span class="Symbol">,</span><span class="ConId">RowCheckConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">(</span><span class="ConId">InPredicate</span> <span class="VarId">ea</span>
                                   <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;f&quot;</span><span class="Symbol">)</span> <span class="ConId">True</span>
                                   <span class="Symbol">(</span><span class="ConId">InList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="VarId">stringQ</span> <span class="String">&quot;a&quot;</span>
                                           <span class="Symbol">,</span><span class="VarId">stringQ</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]))]]</span> <span class="Symbol">[]]</span>
     <span class="Symbol">]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">     <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;references&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int references t2\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">RowReferenceConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="String">&quot;t2&quot;</span> <span class="ConId">Nothing</span>
                            <span class="ConId">Restrict</span> <span class="ConId">Restrict</span><span class="Symbol">]][]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int references t2(y)\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">RowReferenceConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="String">&quot;t2&quot;</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="String">&quot;y&quot;</span><span class="Symbol">)</span>
                            <span class="ConId">Restrict</span> <span class="ConId">Restrict</span><span class="Symbol">]][]]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int,\n\
        \ y int,\n\
        \ foreign key (x,y) references t2\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="VarId">att</span> <span class="String">&quot;x&quot;</span> <span class="String">&quot;int&quot;</span>
                          <span class="Symbol">,</span><span class="VarId">att</span> <span class="String">&quot;y&quot;</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">ReferenceConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="String">&quot;y&quot;</span><span class="Symbol">]</span> <span class="String">&quot;t2&quot;</span> <span class="Symbol">[]</span>
          <span class="ConId">Restrict</span> <span class="ConId">Restrict</span><span class="Symbol">]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int,\n\
        \ y int,\n\
        \ foreign key (x,y) references t2(z,w)\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="VarId">att</span> <span class="String">&quot;x&quot;</span> <span class="String">&quot;int&quot;</span>
                          <span class="Symbol">,</span><span class="VarId">att</span> <span class="String">&quot;y&quot;</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">ReferenceConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="String">&quot;y&quot;</span><span class="Symbol">]</span> <span class="String">&quot;t2&quot;</span> <span class="Symbol">[</span><span class="String">&quot;z&quot;</span><span class="Symbol">,</span> <span class="String">&quot;w&quot;</span><span class="Symbol">]</span>
          <span class="ConId">Restrict</span> <span class="ConId">Restrict</span><span class="Symbol">]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int references t2 on delete cascade\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">RowReferenceConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="String">&quot;t2&quot;</span> <span class="ConId">Nothing</span>
                            <span class="ConId">Cascade</span> <span class="ConId">Restrict</span><span class="Symbol">]][]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int references t2 on update cascade\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">RowReferenceConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="String">&quot;t2&quot;</span> <span class="ConId">Nothing</span>
                            <span class="ConId">Restrict</span> <span class="ConId">Cascade</span><span class="Symbol">]][]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int references t2 on delete cascade on update cascade\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="String">&quot;x&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                           <span class="Symbol">[</span><span class="ConId">RowReferenceConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="String">&quot;t2&quot;</span> <span class="ConId">Nothing</span>
                            <span class="ConId">Cascade</span> <span class="ConId">Cascade</span><span class="Symbol">]][]]</span>

     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create table t1 (\n\
        \ x int,\n\
        \ y int,\n\
        \ foreign key (x,y) references t2 on update cascade on delete cascade\n\
        \);&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateTable</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="VarId">att</span> <span class="String">&quot;x&quot;</span> <span class="String">&quot;int&quot;</span>
                          <span class="Symbol">,</span><span class="VarId">att</span> <span class="String">&quot;y&quot;</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">ReferenceConstraint</span> <span class="VarId">ea</span> <span class="String">&quot;&quot;</span> <span class="Symbol">[</span><span class="String">&quot;x&quot;</span><span class="Symbol">,</span> <span class="String">&quot;y&quot;</span><span class="Symbol">]</span> <span class="String">&quot;t2&quot;</span> <span class="Symbol">[]</span>
          <span class="ConId">Cascade</span> <span class="ConId">Cascade</span><span class="Symbol">]]</span>

     <span class="Symbol">]</span>
     <span class="Symbol">]]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;functions&quot;</span> <span class="Symbol">[</span>
     <span class="ConId">Group</span> <span class="String">&quot;basics&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;create function t1(text) returns text as $$\n\
        \select a from t1 where b = $1;\n\
        \$$ language sql stable;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">ParamDefTp</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Sql</span>
       <span class="Symbol">(</span><span class="ConId">SqlFnBody</span> <span class="VarId">ea</span>
        <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFromWhere</span> <span class="Symbol">[</span><span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)]</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;t1&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span>
         <span class="Symbol">(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span>
          <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">,</span> <span class="ConId">PositionalArg</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">])])</span>
       <span class="ConId">Stable</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create function fn() returns void as $$\n\
        \declare\n\
        \  a int;\n\
        \  b text;\n\
        \begin\n\
        \  null;\n\
        \end;\n\
        \$$ language plpgsql volatile;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[]</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;void&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span> <span class="Symbol">[</span><span class="ConId">VarDef</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                                           <span class="Symbol">,</span><span class="ConId">VarDef</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
                          <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Volatile</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create function fn() returns void as $$\n\
        \declare\n\
        \  a int;\n\
        \  b text;\n\
        \begin\n\
        \  null;\n\
        \end;\n\
        \$$ language plpgsql volatile;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[]</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;void&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span> <span class="Symbol">[</span><span class="ConId">VarDef</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span>
                          <span class="Symbol">,</span><span class="ConId">VarDef</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">)</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
        <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Volatile</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create function fn(a text[]) returns int[] as $$\n\
        \declare\n\
        \  b xtype[] := '{}';\n\
        \begin\n\
        \  null;\n\
        \end;\n\
        \$$ language plpgsql immutable;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span>
       <span class="Symbol">[</span><span class="ConId">ParamDef</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">$</span> <span class="ConId">ArrayTypeName</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">ArrayTypeName</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span>
         <span class="Symbol">[</span><span class="ConId">VarDef</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span> <span class="Symbol">(</span><span class="ConId">ArrayTypeName</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;xtype&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="VarId">stringQ</span> <span class="String">&quot;{}&quot;</span><span class="Symbol">)]</span>
         <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Immutable</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create function fn() returns void as '\n\
        \declare\n\
        \  a int := 3;\n\
        \begin\n\
        \  null;\n\
        \end;\n\
        \' language plpgsql stable;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[]</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;void&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span>
         <span class="Symbol">[</span><span class="ConId">VarDef</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="Symbol">$</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">)]</span>
         <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Stable</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create function fn(int) returns void as '\n\
        \declare\n\
        \  a alias for $1;\n\
        \begin\n\
        \  null;\n\
        \end;\n\
        \' language plpgsql stable;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span>
       <span class="Symbol">[</span><span class="ConId">ParamDefTp</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;void&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span>
         <span class="Symbol">[</span><span class="ConId">ParamAlias</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="Number">1</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Stable</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create function fn(b int) returns void as '\n\
        \declare\n\
        \  a alias for b;\n\
        \begin\n\
        \  null;\n\
        \end;\n\
        \' language plpgsql stable;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span>
       <span class="Symbol">[</span><span class="ConId">ParamDef</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span> <span class="Symbol">$</span> <span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">]</span>
       <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;void&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span>
        <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span>
         <span class="Symbol">[</span><span class="ConId">VarAlias</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span>
         <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Stable</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create function fn() returns setof int as $$\n\
        \begin\n\
        \  null;\n\
        \end;\n\
        \$$ language plpgsql stable;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[]</span>
       <span class="Symbol">(</span><span class="ConId">SetOfTypeName</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Stable</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create function fn() returns void as $$\n\
        \begin\n\
        \  null;\n\
        \end\n\
        \$$ language plpgsql stable;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[]</span>
       <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;void&quot;</span><span class="Symbol">)</span> <span class="ConId">NoReplace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Stable</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create or replace function fn() returns void as $$\n\
        \begin\n\
        \  null;\n\
        \end\n\
        \$$ language plpgsql stable;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">CreateFunction</span> <span class="VarId">ea</span> <span class="String">&quot;fn&quot;</span> <span class="Symbol">[]</span>
       <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;void&quot;</span><span class="Symbol">)</span> <span class="ConId">Replace</span> <span class="ConId">Plpgsql</span>
       <span class="Symbol">(</span><span class="ConId">PlpgsqlFnBody</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Block</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]))</span>
       <span class="ConId">Stable</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;drop function test(text);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropFunction</span> <span class="VarId">ea</span> <span class="ConId">Require</span> <span class="Symbol">[(</span><span class="String">&quot;test&quot;</span><span class="Symbol">,[</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">])]</span> <span class="ConId">Restrict</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;drop function test(int,int);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropFunction</span> <span class="VarId">ea</span> <span class="ConId">Require</span> <span class="Symbol">[(</span><span class="String">&quot;test&quot;</span><span class="Symbol">,[</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span>
                                        <span class="Symbol">,</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;int&quot;</span><span class="Symbol">])]</span> <span class="ConId">Restrict</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;drop function if exists a(),test(text) cascade;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">DropFunction</span> <span class="VarId">ea</span> <span class="ConId">IfExists</span> <span class="Symbol">[(</span><span class="String">&quot;a&quot;</span><span class="Symbol">,[])</span>
                          <span class="Symbol">,(</span><span class="String">&quot;test&quot;</span><span class="Symbol">,[</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="String">&quot;text&quot;</span><span class="Symbol">])]</span> <span class="ConId">Cascade</span><span class="Symbol">]</span>
    <span class="Symbol">]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;simple plpgsql statements&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">f</span> <span class="String">&quot;success := true;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Assignment</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;success&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;success = true;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Assignment</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;success&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;return true;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Return</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Just</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;return;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Return</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;return next 1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">ReturnNext</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;return query select a from b;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">ReturnQuery</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="VarId">selectFrom</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;raise notice 'stuff %', 1;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Raise</span> <span class="VarId">ea</span> <span class="ConId">RNotice</span> <span class="String">&quot;stuff %&quot;</span> <span class="Symbol">[</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;perform test();&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Perform</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;test&quot;</span> <span class="Symbol">[]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;perform test(a,b);&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Perform</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;test&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;perform test(r.relvar_name || '_and_stuff');&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Perform</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;test&quot;</span> <span class="Symbol">[</span>
                    <span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;||&quot;</span> <span class="Symbol">[</span><span class="VarId">qi</span> <span class="String">&quot;r&quot;</span> <span class="String">&quot;relvar_name&quot;</span>
                                    <span class="Symbol">,</span><span class="VarId">stringQ</span> <span class="String">&quot;_and_stuff&quot;</span><span class="Symbol">]]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;select into a,b c,d from e;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span> <span class="VarId">selI</span> <span class="String">&quot;d&quot;</span><span class="Symbol">]</span> <span class="Symbol">[</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span>
                  <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;e&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;select c,d into a,b from e;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">SelectStatement</span> <span class="VarId">ea</span> <span class="Symbol">$</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span> <span class="VarId">selI</span> <span class="String">&quot;d&quot;</span><span class="Symbol">]</span> <span class="Symbol">[</span><span class="VarId">i</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="VarId">i</span> <span class="String">&quot;b&quot;</span><span class="Symbol">])</span>
                  <span class="Symbol">[</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;e&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>

     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;execute s;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">Execute</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;s&quot;</span><span class="Symbol">)]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;execute s into r;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">ExecuteInto</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;s&quot;</span><span class="Symbol">)</span> <span class="Symbol">[</span><span class="String">&quot;r&quot;</span><span class="Symbol">]]</span>

     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;continue;&quot;</span> <span class="Symbol">[</span><span class="ConId">ContinueStatement</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span><span class="Symbol">]</span>
    <span class="Symbol">]</span>

    <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;other plpgsql statements&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">f</span> <span class="String">&quot;for r in select a from tbl loop\n\
        \null;\n\
        \end loop;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">ForSelectStatement</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;r&quot;</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="VarId">selectFrom</span>  <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">))</span>
       <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;for r in select a from tbl where true loop\n\
        \null;\n\
        \end loop;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">ForSelectStatement</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;r&quot;</span><span class="Symbol">)</span>
       <span class="Symbol">(</span><span class="VarId">selectFromWhere</span> <span class="Symbol">[</span><span class="VarId">selI</span> <span class="String">&quot;a&quot;</span><span class="Symbol">]</span> <span class="Symbol">(</span><span class="ConId">Tref</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;tbl&quot;</span><span class="Symbol">)</span> <span class="ConId">NoAlias</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">))</span>
       <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;for r in 1 .. 10 loop\n\
        \null;\n\
        \end loop;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">ForIntegerStatement</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;r&quot;</span><span class="Symbol">)</span>
       <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">1</span><span class="Symbol">)</span> <span class="Symbol">(</span><span class="ConId">IntegerLit</span> <span class="VarId">ea</span> <span class="Number">10</span><span class="Symbol">)</span>
       <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]]</span>

     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;if a=b then\n\
        \  update c set d = e;\n\
        \end if;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">If</span> <span class="VarId">ea</span> <span class="Symbol">[(</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">]</span>
              <span class="Symbol">,[</span><span class="ConId">Update</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="String">&quot;c&quot;</span><span class="Symbol">)</span> <span class="Symbol">[</span><span class="ConId">FunCall</span> <span class="VarId">ea</span> <span class="String">&quot;=&quot;</span> <span class="Symbol">[</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;d&quot;</span>
                                                  <span class="Symbol">,</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;e&quot;</span><span class="Symbol">]]</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span><span class="Symbol">])]</span>
       <span class="Symbol">[]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;if true then\n\
        \  null;\n\
        \else\n\
        \  null;\n\
        \end if;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">If</span> <span class="VarId">ea</span> <span class="Symbol">[((</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">),[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">])]</span>
       <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;if true then\n\
        \  null;\n\
        \elseif false then\n\
        \  return;\n\
        \end if;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">If</span> <span class="VarId">ea</span> <span class="Symbol">[((</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">),</span> <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">])</span>
          <span class="Symbol">,((</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">False</span><span class="Symbol">),</span> <span class="Symbol">[</span><span class="ConId">Return</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span><span class="Symbol">])]</span>
       <span class="Symbol">[]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;if true then\n\
        \  null;\n\
        \elseif false then\n\
        \  return;\n\
        \elsif false then\n\
        \  return;\n\
        \else\n\
        \  return;\n\
        \end if;&quot;</span>
      <span class="Symbol">[</span><span class="ConId">If</span> <span class="VarId">ea</span> <span class="Symbol">[((</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">True</span><span class="Symbol">),</span> <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">])</span>
          <span class="Symbol">,((</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">False</span><span class="Symbol">),</span> <span class="Symbol">[</span><span class="ConId">Return</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span><span class="Symbol">])</span>
          <span class="Symbol">,((</span><span class="ConId">BooleanLit</span> <span class="VarId">ea</span> <span class="ConId">False</span><span class="Symbol">),</span> <span class="Symbol">[</span><span class="ConId">Return</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span><span class="Symbol">])]</span>
       <span class="Symbol">[</span><span class="ConId">Return</span> <span class="VarId">ea</span> <span class="ConId">Nothing</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">f</span> <span class="String">&quot;case a\n\
        \  when b then null;\n\
        \  when c,d then null;\n\
        \  else null;\n\
        \end case;&quot;</span>
     <span class="Symbol">[</span><span class="ConId">CaseStatementSimple</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;a&quot;</span><span class="Symbol">)</span>
      <span class="Symbol">[([</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;b&quot;</span><span class="Symbol">],</span> <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">])</span>
      <span class="Symbol">,([</span><span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;c&quot;</span><span class="Symbol">,</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span> <span class="String">&quot;d&quot;</span><span class="Symbol">],</span> <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">])]</span>
      <span class="Symbol">[</span><span class="ConId">NullStatement</span> <span class="VarId">ea</span><span class="Symbol">]]</span>

    <span class="Symbol">]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">   <span class="Symbol">,</span><span class="ConId">Group</span> <span class="String">&quot;misc&quot;</span> <span class="Symbol">[</span>
      <span class="VarId">s</span> <span class="String">&quot;SET search_path TO my_schema, public;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">Set</span> <span class="VarId">ea</span> <span class="String">&quot;search_path&quot;</span> <span class="Symbol">[</span><span class="ConId">SetId</span> <span class="VarId">ea</span> <span class="String">&quot;my_schema&quot;</span>
                              <span class="Symbol">,</span><span class="ConId">SetId</span> <span class="VarId">ea</span> <span class="String">&quot;public&quot;</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;SET t1 = 3;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">Set</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">SetNum</span> <span class="VarId">ea</span> <span class="Number">3</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;SET t1 = 'stuff';&quot;</span>
        <span class="Symbol">[</span><span class="ConId">Set</span> <span class="VarId">ea</span> <span class="String">&quot;t1&quot;</span> <span class="Symbol">[</span><span class="ConId">SetStr</span> <span class="VarId">ea</span> <span class="String">&quot;stuff&quot;</span><span class="Symbol">]]</span>
     <span class="Symbol">,</span><span class="VarId">s</span> <span class="String">&quot;create language plpgsql;&quot;</span>
        <span class="Symbol">[</span><span class="ConId">CreateLanguage</span> <span class="VarId">ea</span> <span class="String">&quot;plpgsql&quot;</span><span class="Symbol">]</span>

    <span class="Symbol">]</span>

    <span class="Symbol">]]</span>
 <span class="Keyword">where</span>
   <span class="VarId">e</span> <span class="Symbol">=</span> <span class="ConId">Expr</span>
   <span class="VarId">s</span> <span class="Symbol">=</span> <span class="ConId">Stmt</span>
   <span class="VarId">f</span> <span class="Symbol">=</span> <span class="ConId">PgSqlStmt</span></pre></div></div></div><hr
     /><p
    >shortcuts for constructing test data and asts</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Function">stringQ</span> <span class="Symbol">::</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">Expression</span>
<span class="Function">stringQ</span> <span class="Symbol">=</span> <span class="ConId">StringLit</span> <span class="VarId">ea</span>

<span class="Function">selectFrom</span> <span class="Symbol">::</span> <span class="ConId">SelectItemList</span>
           <span class="Symbol">-&gt;</span> <span class="ConId">TableRef</span>
           <span class="Symbol">-&gt;</span> <span class="ConId">SelectExpression</span>
<span class="Function">selectFrom</span> <span class="VarId">selList</span> <span class="VarId">frm</span> <span class="Symbol">=</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="VarId">selList</span> <span class="Symbol">[])</span>
                           <span class="Symbol">[</span><span class="VarId">frm</span><span class="Symbol">]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span>

<span class="Function">selectE</span> <span class="Symbol">::</span> <span class="ConId">SelectList</span> <span class="Symbol">-&gt;</span> <span class="ConId">SelectExpression</span>
<span class="Function">selectE</span> <span class="VarId">selList</span> <span class="Symbol">=</span> <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span> <span class="VarId">selList</span>
                    <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span>

<span class="Function">selIL</span> <span class="Symbol">::</span> <span class="Symbol">[</span><span class="ConId">String</span><span class="Symbol">]</span> <span class="Symbol">-&gt;</span> <span class="Symbol">[</span><span class="ConId">SelectItem</span><span class="Symbol">]</span>
<span class="Function">selIL</span> <span class="Symbol">=</span> <span class="VarId">map</span> <span class="VarId">selI</span>
<span class="Function">selEL</span> <span class="Symbol">::</span> <span class="Symbol">[</span><span class="ConId">Expression</span><span class="Symbol">]</span> <span class="Symbol">-&gt;</span> <span class="Symbol">[</span><span class="ConId">SelectItem</span><span class="Symbol">]</span>
<span class="Function">selEL</span> <span class="Symbol">=</span> <span class="VarId">map</span> <span class="Symbol">(</span><span class="ConId">SelExp</span> <span class="VarId">ea</span><span class="Symbol">)</span>

<span class="Function">i</span> <span class="Symbol">::</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">Expression</span>
<span class="Function">i</span> <span class="Symbol">=</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span>

<span class="Function">qi</span> <span class="Symbol">::</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">Expression</span>
<span class="Function">qi</span> <span class="VarId">c</span> <span class="VarId">n</span> <span class="Symbol">=</span> <span class="ConId">QIdentifier</span> <span class="VarId">ea</span> <span class="Symbol">(</span><span class="VarId">i</span> <span class="VarId">c</span><span class="Symbol">)</span> <span class="VarId">n</span>

<span class="Function">selI</span> <span class="Symbol">::</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">SelectItem</span>
<span class="Function">selI</span> <span class="Symbol">=</span> <span class="ConId">SelExp</span> <span class="VarId">ea</span> <span class="Symbol">.</span> <span class="ConId">Identifier</span> <span class="VarId">ea</span>

<span class="Function">sl</span> <span class="Symbol">::</span> <span class="ConId">SelectItemList</span> <span class="Symbol">-&gt;</span> <span class="ConId">SelectList</span>
<span class="Function">sl</span> <span class="VarId">a</span> <span class="Symbol">=</span> <span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="VarId">a</span> <span class="Symbol">[]</span>

<span class="Function">selectFromWhere</span> <span class="Symbol">::</span> <span class="ConId">SelectItemList</span>
                <span class="Symbol">-&gt;</span> <span class="ConId">TableRef</span>
                <span class="Symbol">-&gt;</span> <span class="ConId">Expression</span>
                <span class="Symbol">-&gt;</span> <span class="ConId">SelectExpression</span>
<span class="Function">selectFromWhere</span> <span class="VarId">selList</span> <span class="VarId">frm</span> <span class="VarId">whr</span> <span class="Symbol">=</span>
    <span class="ConId">Select</span> <span class="VarId">ea</span> <span class="ConId">Dupes</span> <span class="Symbol">(</span><span class="ConId">SelectList</span> <span class="VarId">ea</span> <span class="VarId">selList</span> <span class="Symbol">[])</span>
               <span class="Symbol">[</span><span class="VarId">frm</span><span class="Symbol">]</span> <span class="Symbol">(</span><span class="ConId">Just</span> <span class="VarId">whr</span><span class="Symbol">)</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span> <span class="ConId">Nothing</span> <span class="ConId">Nothing</span>

<span class="Function">att</span> <span class="Symbol">::</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">AttributeDef</span>
<span class="Function">att</span> <span class="VarId">n</span> <span class="VarId">t</span> <span class="Symbol">=</span> <span class="ConId">AttributeDef</span> <span class="VarId">ea</span> <span class="VarId">n</span> <span class="Symbol">(</span><span class="ConId">SimpleTypeName</span> <span class="VarId">ea</span> <span class="VarId">t</span><span class="Symbol">)</span> <span class="ConId">Nothing</span> <span class="Symbol">[]</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Function">ea</span> <span class="Symbol">::</span> <span class="ConId">Annotation</span>
<span class="Function">ea</span> <span class="Symbol">=</span> <span class="VarId">emptyAnnotation</span></pre></div></div></div><hr
     /><p
    >Unit test helpers</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Function">itemToTft</span> <span class="Symbol">::</span> <span class="ConId">Item</span> <span class="Symbol">-&gt;</span> <span class="ConId">Test.Framework.Test</span>
<span class="Function">itemToTft</span> <span class="Symbol">(</span><span class="ConId">Expr</span> <span class="VarId">a</span> <span class="VarId">b</span><span class="Symbol">)</span> <span class="Symbol">=</span> <span class="VarId">testParseExpression</span> <span class="VarId">a</span> <span class="VarId">b</span>
<span class="Function">itemToTft</span> <span class="Symbol">(</span><span class="ConId">PgSqlStmt</span> <span class="VarId">a</span> <span class="VarId">b</span><span class="Symbol">)</span> <span class="Symbol">=</span> <span class="VarId">testParsePlpgsqlStatements</span> <span class="VarId">a</span> <span class="VarId">b</span>
<span class="Function">itemToTft</span> <span class="Symbol">(</span><span class="ConId">Stmt</span> <span class="VarId">a</span> <span class="VarId">b</span><span class="Symbol">)</span> <span class="Symbol">=</span> <span class="VarId">testParseStatements</span> <span class="VarId">a</span> <span class="VarId">b</span>
<span class="Function">itemToTft</span> <span class="Symbol">(</span><span class="ConId">Group</span> <span class="VarId">s</span> <span class="VarId">is</span><span class="Symbol">)</span> <span class="Symbol">=</span> <span class="VarId">testGroup</span> <span class="VarId">s</span> <span class="Symbol">$</span> <span class="VarId">map</span> <span class="VarId">itemToTft</span> <span class="VarId">is</span>

<span class="Function">testParseExpression</span> <span class="Symbol">::</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">Expression</span> <span class="Symbol">-&gt;</span> <span class="ConId">Test.Framework.Test</span>
<span class="Function">testParseExpression</span> <span class="VarId">src</span> <span class="VarId">ast</span> <span class="Symbol">=</span> <span class="VarId">parseUtil</span> <span class="VarId">src</span> <span class="VarId">ast</span>
                                 <span class="Symbol">(</span><span class="VarId">parseExpression</span> <span class="String">&quot;&quot;</span><span class="Symbol">)</span> <span class="VarId">printExpression</span>

<span class="Function">testParseStatements</span> <span class="Symbol">::</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="Symbol">[</span><span class="ConId">Statement</span><span class="Symbol">]</span> <span class="Symbol">-&gt;</span> <span class="ConId">Test.Framework.Test</span>
<span class="Function">testParseStatements</span> <span class="VarId">src</span> <span class="VarId">ast</span> <span class="Symbol">=</span> <span class="VarId">parseUtil</span> <span class="VarId">src</span> <span class="VarId">ast</span> <span class="Symbol">(</span><span class="VarId">parseSql</span> <span class="String">&quot;&quot;</span><span class="Symbol">)</span> <span class="VarId">printSql</span>

<span class="Function">testParsePlpgsqlStatements</span> <span class="Symbol">::</span> <span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="Symbol">[</span><span class="ConId">Statement</span><span class="Symbol">]</span> <span class="Symbol">-&gt;</span> <span class="ConId">Test.Framework.Test</span>
<span class="Function">testParsePlpgsqlStatements</span> <span class="VarId">src</span> <span class="VarId">ast</span> <span class="Symbol">=</span> <span class="VarId">parseUtil</span> <span class="VarId">src</span> <span class="VarId">ast</span> <span class="Symbol">(</span><span class="VarId">parsePlpgsql</span> <span class="String">&quot;&quot;</span><span class="Symbol">)</span> <span class="VarId">printSql</span>

<span class="Function">parseUtil</span> <span class="Symbol">::</span> <span class="Symbol">(</span><span class="ConId">Show</span> <span class="VarId">t</span><span class="Symbol">,</span> <span class="ConId">Eq</span> <span class="VarId">b</span><span class="Symbol">,</span> <span class="ConId">Show</span> <span class="VarId">b</span><span class="Symbol">,</span> <span class="ConId">Data</span> <span class="VarId">b</span><span class="Symbol">)</span> <span class="Symbol">=&gt;</span>
             <span class="ConId">String</span>
          <span class="Symbol">-&gt;</span> <span class="VarId">b</span>
          <span class="Symbol">-&gt;</span> <span class="Symbol">(</span><span class="ConId">String</span> <span class="Symbol">-&gt;</span> <span class="ConId">Either</span> <span class="VarId">t</span> <span class="VarId">b</span><span class="Symbol">)</span>
          <span class="Symbol">-&gt;</span> <span class="Symbol">(</span><span class="VarId">b</span> <span class="Symbol">-&gt;</span> <span class="ConId">String</span><span class="Symbol">)</span>
          <span class="Symbol">-&gt;</span> <span class="ConId">Test.Framework.Test</span>
<span class="Function">parseUtil</span> <span class="VarId">src</span> <span class="VarId">ast</span> <span class="VarId">parser</span> <span class="VarId">printer</span> <span class="Symbol">=</span> <span class="VarId">testCase</span> <span class="Symbol">(</span><span class="String">&quot;parse &quot;</span> <span class="Symbol">++</span> <span class="VarId">src</span><span class="Symbol">)</span> <span class="Symbol">$</span>
  <span class="Keyword">case</span> <span class="VarId">parser</span> <span class="VarId">src</span> <span class="Keyword">of</span>
    <span class="ConId">Left</span> <span class="VarId">er</span> <span class="Symbol">-&gt;</span> <span class="VarId">assertFailure</span> <span class="Symbol">$</span> <span class="VarId">show</span> <span class="VarId">er</span>
    <span class="ConId">Right</span> <span class="VarId">ast'</span> <span class="Symbol">-&gt;</span> <span class="Keyword">do</span>
      <span class="VarId">assertEqual</span> <span class="Symbol">(</span><span class="String">&quot;parse &quot;</span> <span class="Symbol">++</span> <span class="VarId">src</span><span class="Symbol">)</span> <span class="VarId">ast</span> <span class="Symbol">$</span> <span class="VarId">resetAnnotations</span> <span class="VarId">ast'</span>
      <span class="Keyword">case</span> <span class="VarId">parser</span> <span class="Symbol">(</span><span class="VarId">printer</span> <span class="VarId">ast</span><span class="Symbol">)</span> <span class="Keyword">of</span>
        <span class="ConId">Left</span> <span class="VarId">er</span> <span class="Symbol">-&gt;</span> <span class="VarId">assertFailure</span> <span class="Symbol">$</span> <span class="String">&quot;reparse\n&quot;</span> <span class="Symbol">++</span> <span class="VarId">show</span> <span class="VarId">er</span> <span class="Symbol">++</span> <span class="String">&quot;\n&quot;</span> <span class="Comment">-- ++ pp ++ &quot;\n&quot;</span>
        <span class="ConId">Right</span> <span class="VarId">ast''</span> <span class="Symbol">-&gt;</span> <span class="VarId">assertEqual</span> <span class="Symbol">(</span><span class="String">&quot;reparse &quot;</span> <span class="Symbol">++</span> <span class="VarId">printer</span> <span class="VarId">ast</span><span class="Symbol">)</span> <span class="VarId">ast</span> <span class="Symbol">$</span> <span class="VarId">resetAnnotations</span> <span class="VarId">ast''</span></pre></div></div></div><pre
    ><code
      >TODO
new idea for testing:
parsesql -&gt; ast1
parse, pretty print, parse -&gt; ast2
load into pg, pg_dump, parse -&gt; ast3
parse, pretty print, load into pg, pg_dump, parse -&gt; ast4
check all these asts are the same
</code
      ></pre
    ><br
     /><br
     /><br
     /><div class="footer"
    >generated on 01/29/11 20:06:46, hssqlppp-0.3.0</div
    ></body
  ></html
>
