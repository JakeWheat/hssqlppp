<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><title
    >DevelTool</title
    ><link href="../../main.css" rel="stylesheet" type="text/css"
     /></head
  ><body
  ><div class="header"
    ><a href="../../index.txt.html"
      >HsSqlPpp-0.3.0</a
      ></div
    ><br
     /><br
     /><br
     /><p
    >Make the website,</p
    ><p
    >To compile, use something like:</p
    ><p
    >time ghc -threaded -XDeriveDataTypeable -DPOSTGRES -cpp -pgmPcpphs -optP--cpp -idevel:src:examples/chaos:examples/extensions/:examples/util/:tests/ --make devel/DevelTool</p
    ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Keyword">import</span> <span class="ConId">System.Environment</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Keyword">import</span> <span class="ConId">MakeWebsite</span>
<span class="Keyword">import</span> <span class="ConId">MakeAntiNodes</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Function">main</span> <span class="Symbol">::</span> <span class="ConId">IO</span> <span class="Symbol">()</span>
<span class="Function">main</span> <span class="Symbol">=</span> <span class="Keyword">do</span>
  <span class="VarId">args</span> <span class="Symbol">&lt;-</span> <span class="VarId">getArgs</span>
  <span class="Keyword">case</span> <span class="VarId">args</span> <span class="Keyword">of</span>
    <span class="Symbol">[</span><span class="String">&quot;sourcelinks&quot;</span><span class="Symbol">]</span> <span class="Symbol">-&gt;</span> <span class="VarId">sourceLinks</span>
    <span class="Symbol">[</span><span class="String">&quot;makewebsite&quot;</span><span class="Symbol">]</span> <span class="Symbol">-&gt;</span> <span class="VarId">makeWebsite</span>
    <span class="Symbol">[</span><span class="String">&quot;makeantinodes&quot;</span><span class="Symbol">]</span> <span class="Symbol">-&gt;</span> <span class="VarId">writeAntiNodes</span>
    <span class="VarId">x</span> <span class="Symbol">-&gt;</span> <span class="VarId">error</span> <span class="Symbol">$</span> <span class="String">&quot;don't understand &quot;</span> <span class="Symbol">++</span> <span class="VarId">show</span> <span class="VarId">x</span></pre></div></div></div><hr
     /><div id="dbcatalog"
    ><h1
      >dbCatalog</h1
      ><p
      >This reads an catalog from a database and writes it out using show. Warning: these things are big since they contain all the default PostgreSQL catalog contents.</p
      ><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Comment">{-readCat :: String -&gt; IO ()</span>
<span class="Comment">readCat dbName = do</span>
<span class="Comment">  cat &lt;- readCatalogFromDatabase dbName</span>
<span class="Comment">  putStrLn preamble</span>
<span class="Comment">  putStrLn $ prefixLines $ ppExpr cat</span>
<span class="Comment">  where</span>
<span class="Comment">    preamble = [$here|</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode">
<span class="ConId">This</span> <span class="VarId">file</span> <span class="VarId">is</span> <span class="VarId">auto</span> <span class="VarId">generated</span><span class="Symbol">,</span> <span class="VarId">to</span> <span class="VarId">regenerate</span> <span class="VarId">run</span>
<span class="Function">example</span><span class="Symbol">/</span><span class="ConId">HsSqlSystem</span> <span class="VarId">dbcatalog</span> <span class="Comment">--database=template1 &gt; src/Database/HsSqlPpp/AstInternals/Catalog/DefaultTemplate1Catalog.lhs</span>

<span class="Function">from</span> <span class="VarId">the</span> <span class="VarId">project</span> <span class="VarId">root</span> <span class="Symbol">(</span><span class="VarId">i</span><span class="Symbol">.</span><span class="VarId">e</span><span class="Symbol">.</span> <span class="Keyword">where</span> <span class="VarId">the</span> <span class="VarId">cabal</span> <span class="VarId">file</span> <span class="VarId">is</span> <span class="VarId">located</span><span class="Symbol">).</span>

<span class="Symbol">&gt;</span> <span class="Keyword">module</span> <span class="ConId">Database.HsSqlPpp.AstInternals.Catalog.DefaultTemplate1Catalog</span>
<span class="Symbol">&gt;</span>      <span class="Symbol">(</span><span class="VarId">defaultTemplate1Catalog</span><span class="Symbol">)</span> <span class="Keyword">where</span>
<span class="Symbol">&gt;</span>
<span class="Symbol">&gt;</span> <span class="Keyword">import</span> <span class="ConId">Database.HsSqlPpp.AstInternals.Catalog.CatalogInternal</span>
<span class="Symbol">&gt;</span> <span class="Keyword">import</span> <span class="ConId">Database.HsSqlPpp.AstInternals.TypeType</span>
<span class="Symbol">&gt;</span>
<span class="Symbol">&gt;</span> <span class="VarId">defaultTemplate1Catalog</span> <span class="Symbol">::</span> <span class="ConId">Catalog</span>
<span class="Symbol">&gt;</span> <span class="VarId">defaultTemplate1Catalog</span> <span class="Symbol">=</span>
<span class="Symbol">&gt;</span>     <span class="Symbol">(\</span><span class="VarId">l</span> <span class="Symbol">-&gt;</span> <span class="Keyword">case</span> <span class="VarId">l</span> <span class="Keyword">of</span>
<span class="Symbol">&gt;</span>              <span class="ConId">Left</span> <span class="VarId">x</span> <span class="Symbol">-&gt;</span> <span class="VarId">error</span> <span class="Symbol">$</span> <span class="VarId">show</span> <span class="VarId">x</span>
<span class="Symbol">&gt;</span>              <span class="ConId">Right</span> <span class="VarId">e</span> <span class="Symbol">-&gt;</span> <span class="VarId">e</span><span class="Symbol">)</span> <span class="Symbol">$</span>
<span class="Symbol">&gt;</span>      <span class="VarId">updateCatalog</span> <span class="VarId">defaultCatalog</span></pre></div></div></div><div class='sourceCode'><div class='literate'><div class='haskell'><pre class="sourceCode"><span class="Symbol">|]</span>
     <span class="VarId">prefixLines</span> <span class="Symbol">=</span> <span class="VarId">unlines</span> <span class="Symbol">.</span> <span class="VarId">map</span> <span class="Symbol">(</span><span class="String">&quot;&gt;        &quot;</span> <span class="Symbol">++)</span> <span class="Symbol">.</span> <span class="VarId">lines</span> <span class="Symbol">-}</span></pre></div></div></div></div
    ><br
     /><br
     /><br
     /><div class="footer"
    >generated on 01/29/11 20:06:46, hssqlppp-0.3.0</div
    ></body
  ></html
>
