<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><title
    >PiecePrototypes</title
    ><link href="../../../../../../main.css" rel="stylesheet" type="text/css"
     /></head
  ><body
  ><div class="header"
    ><a href="../../../../../../index.html"
      >HsSqlPpp-0.3.0</a
      ></div
    ><br
     /><br
     /><br
     /><p
    >/*</p
    ><div id="piece-prototypes"
    ><h1
      >piece prototypes</h1
      ><div id="ddl"
      ><h2
	>ddl</h2
	><p
	>Each type of piece starts with the same stats. Once a piece is on the board, some of these stats can be changed - see the pieces module.</p
	><p
	>This table holds these starting stats.</p
	><p
	>*/</p
	><div class='sourceCode'><div class='literate'><div class='sql'><pre class="sourceCode">
<span class="Keyword">select</span> <span class="VarId">module</span><span class="Symbol">(</span><span class="Char">'Chaos.Server.PiecePrototypes'</span><span class="Symbol">);</span>

<span class="Comment">--creature ranged weapons can be either projectiles or fireballs</span>
<span class="Keyword">create</span> <span class="Keyword">domain</span> <span class="VarId">ranged_weapon_type</span> <span class="Keyword">as</span> <span class="VarId">text</span>
  <span class="Keyword">check</span> <span class="Symbol">(</span><span class="VarId">value</span> <span class="VarId">in</span> <span class="Symbol">(</span><span class="Char">'projectile'</span><span class="Symbol">,</span> <span class="Char">'fire'</span><span class="Symbol">));</span>

</pre></div></div></div><p
	>/*</p
	><p
	>the inheritance here reflects the possible kinds of pieces. The main thing missing is that the create6nf extension doesn't yet support abstract components.</p
	><p
	>TODO: find or rewrite the lost notes on the different kinds of pieces.</p
	><p
	>*/</p
	><div class='sourceCode'><div class='literate'><div class='sql'><pre class="sourceCode">

<span class="Keyword">select</span> <span class="VarId">create6nf</span> <span class="Symbol">(</span>$$

  <span class="VarId">piece_prototypes_mr</span> <span class="Symbol">(</span>
    <span class="VarId">ptype</span> <span class="Type">text</span> <span class="Keyword">primary</span> <span class="VarId">key</span>
  <span class="Symbol">);</span>

  <span class="VarId">attacking_prototypes</span> <span class="Symbol">:</span> <span class="VarId">piece_prototypes</span> <span class="Symbol">(</span>
     <span class="VarId">attack_strength</span> <span class="VarId">int</span>
  <span class="Symbol">);</span>

  <span class="VarId">attackable_prototypes</span> <span class="Symbol">:</span> <span class="VarId">piece_prototypes</span> <span class="Symbol">(</span>
    <span class="VarId">physical_defense</span> <span class="VarId">int</span>
  <span class="Symbol">);</span>

  <span class="VarId">magic_attackable_prototypes</span> <span class="Symbol">:</span> <span class="VarId">piece_prototypes</span> <span class="Symbol">(</span>
    <span class="VarId">magic_defense</span> <span class="VarId">int</span>
  <span class="Symbol">);</span>

  <span class="VarId">creature_prototypes</span> <span class="Symbol">:</span> <span class="VarId">piece_prototypes_mr</span>
                       <span class="Symbol">,</span><span class="VarId">attacking_prototypes</span>
                       <span class="Symbol">,</span><span class="VarId">attackable_prototypes</span>
                       <span class="Symbol">,</span><span class="VarId">magic_attackable_prototypes</span> <span class="Symbol">(</span>
    <span class="VarId">flying</span> <span class="VarId">boolean</span><span class="Symbol">,</span>
    <span class="VarId">speed</span> <span class="Type">int</span><span class="Symbol">,</span>
    <span class="VarId">agility</span> <span class="VarId">int</span>
  <span class="Symbol">);</span>

  <span class="VarId">monster_prototypes</span> <span class="Symbol">:</span> <span class="VarId">creature_prototypes</span> <span class="Symbol">(</span>
    <span class="VarId">undead</span> <span class="VarId">boolean</span><span class="Symbol">,</span>
    <span class="VarId">ridable</span> <span class="VarId">boolean</span>
  <span class="Symbol">);</span>

  <span class="VarId">range_attacking_prototypes</span> <span class="Symbol">:</span> <span class="VarId">creature_prototypes</span> <span class="Symbol">(</span>
    <span class="VarId">ranged_weapon_type</span> <span class="VarId">ranged_weapon_type</span><span class="Symbol">,</span>
    <span class="Keyword">range</span> <span class="Type">int</span><span class="Symbol">,</span>
    <span class="VarId">ranged_attack_strength</span> <span class="VarId">int</span>
  <span class="Symbol">);</span>

$$<span class="Symbol">);</span>

<span class="Keyword">create</span> <span class="Keyword">view</span> <span class="VarId">object_piece_types</span> <span class="VarId">as</span>
  <span class="Keyword">select</span> <span class="VarId">ptype</span> <span class="Keyword">from</span> <span class="VarId">piece_prototypes_mr</span> <span class="Keyword">where</span> <span class="VarId">speed</span> <span class="VarId">is</span> <span class="Keyword">null</span><span class="Symbol">;</span>

<span class="Keyword">create</span> <span class="Keyword">view</span> <span class="VarId">ridable_prototypes</span> <span class="VarId">as</span>
  <span class="Keyword">select</span> <span class="VarId">ptype</span> <span class="Keyword">from</span> <span class="VarId">piece_prototypes_mr</span>
    <span class="Keyword">where</span> <span class="VarId">ridable</span><span class="Symbol">;</span>

<span class="Keyword">create</span> <span class="Keyword">view</span> <span class="VarId">enterable_piece_types</span> <span class="VarId">as</span>
  <span class="Keyword">select</span> <span class="Char">'magic_tree'</span><span class="Symbol">::</span><span class="Type">text</span> <span class="Keyword">as</span> <span class="VarId">ptype</span>
  <span class="Keyword">union</span> <span class="VarId">all</span>
  <span class="Keyword">select</span> <span class="Char">'magic_castle'</span>
  <span class="Keyword">union</span> <span class="VarId">all</span>
  <span class="Keyword">select</span> <span class="Char">'dark_citadel'</span><span class="Symbol">;</span>
</pre></div></div></div><p
	>/* data ----</p
	><p
	>TODO: find a way to represent data like this in the source in a much more readable format - the alternative insert syntax (an unfinished extension) seems good enough, just makes inserts look like updates so each field name is next to its value.</p
	><p
	>*/</p
	><div class='sourceCode'><div class='literate'><div class='sql'><pre class="sourceCode">


<span class="Keyword">copy</span> <span class="VarId">piece_prototypes_mr</span><span class="Symbol">(</span><span class="VarId">ptype</span><span class="Symbol">,</span><span class="VarId">flying</span><span class="Symbol">,</span><span class="VarId">speed</span><span class="Symbol">,</span><span class="VarId">agility</span><span class="Symbol">,</span><span class="VarId">undead</span><span class="Symbol">,</span><span class="VarId">ridable</span><span class="Symbol">,</span>
<span class="VarId">ranged_weapon_type</span><span class="Symbol">,</span><span class="VarId">ranged_attack_strength</span><span class="Symbol">,</span><span class="Keyword">range</span><span class="Symbol">,</span><span class="VarId">attack_strength</span><span class="Symbol">,</span>
<span class="VarId">physical_defense</span><span class="Symbol">,</span><span class="VarId">magic_defense</span><span class="Symbol">)</span> <span class="Keyword">from</span> <span class="Keyword">stdin</span><span class="Symbol">;</span>
<span class="VarId">bat</span>	<span class="VarId">t</span>	<span class="Number">5</span>	<span class="Number">4</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">1</span>	<span class="Number">1</span>	<span class="Number">9</span>
<span class="VarId">bear</span>	<span class="VarId">f</span>	<span class="Number">2</span>	<span class="Number">2</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">6</span>	<span class="Number">7</span>	<span class="Number">6</span>
<span class="VarId">centaur</span>	<span class="VarId">f</span>	<span class="Number">4</span>	<span class="Number">5</span>	<span class="VarId">f</span>	<span class="VarId">t</span>	<span class="VarId">projectile</span>	<span class="Number">2</span>	<span class="Number">4</span>	<span class="Number">1</span>	<span class="Number">3</span>	<span class="Number">5</span>
<span class="VarId">crocodile</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">2</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">5</span>	<span class="Number">6</span>	<span class="Number">2</span>
<span class="VarId">dark_citadel</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>
<span class="VarId">dire_wolf</span>	<span class="VarId">f</span>	<span class="Number">3</span>	<span class="Number">2</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">3</span>	<span class="Number">2</span>	<span class="Number">7</span>
<span class="VarId">eagle</span>	<span class="VarId">t</span>	<span class="Number">6</span>	<span class="Number">2</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">3</span>	<span class="Number">3</span>	<span class="Number">8</span>
<span class="VarId">elf</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">7</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	<span class="VarId">projectile</span>	<span class="Number">2</span>	<span class="Number">6</span>	<span class="Number">1</span>	<span class="Number">2</span>	<span class="Number">5</span>
<span class="VarId">faun</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">8</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">3</span>	<span class="Number">2</span>	<span class="Number">7</span>
<span class="VarId">ghost</span>	<span class="VarId">t</span>	<span class="Number">2</span>	<span class="Number">6</span>	<span class="VarId">t</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">1</span>	<span class="Number">3</span>	<span class="Number">9</span>
<span class="VarId">giant</span>	<span class="VarId">f</span>	<span class="Number">2</span>	<span class="Number">5</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">9</span>	<span class="Number">7</span>	<span class="Number">6</span>
<span class="VarId">giant_rat</span>	<span class="VarId">f</span>	<span class="Number">3</span>	<span class="Number">2</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">1</span>	<span class="Number">1</span>	<span class="Number">8</span>
<span class="VarId">goblin</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">4</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">2</span>	<span class="Number">4</span>	<span class="Number">4</span>
<span class="VarId">golden_dragon</span>	<span class="VarId">t</span>	<span class="Number">3</span>	<span class="Number">5</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	<span class="VarId">fire</span>	<span class="Number">5</span>	<span class="Number">4</span>	<span class="Number">9</span>	<span class="Number">9</span>	<span class="Number">5</span>
<span class="VarId">gooey_blob</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">1</span>	\<span class="VarId">N</span>
<span class="VarId">gorilla</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">2</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">6</span>	<span class="Number">5</span>	<span class="Number">4</span>
<span class="VarId">green_dragon</span>	<span class="VarId">t</span>	<span class="Number">3</span>	<span class="Number">4</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	<span class="VarId">fire</span>	<span class="Number">4</span>	<span class="Number">6</span>	<span class="Number">5</span>	<span class="Number">8</span>	<span class="Number">4</span>
<span class="VarId">gryphon</span>	<span class="VarId">t</span>	<span class="Number">5</span>	<span class="Number">6</span>	<span class="VarId">f</span>	<span class="VarId">t</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">3</span>	<span class="Number">5</span>	<span class="Number">5</span>
<span class="VarId">harpy</span>	<span class="VarId">t</span>	<span class="Number">5</span>	<span class="Number">5</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">4</span>	<span class="Number">2</span>	<span class="Number">8</span>
<span class="VarId">horse</span>	<span class="VarId">f</span>	<span class="Number">4</span>	<span class="Number">1</span>	<span class="VarId">f</span>	<span class="VarId">t</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">1</span>	<span class="Number">3</span>	<span class="Number">8</span>
<span class="VarId">hydra</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">6</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">7</span>	<span class="Number">8</span>	<span class="Number">4</span>
<span class="VarId">king_cobra</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">1</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">4</span>	<span class="Number">1</span>	<span class="Number">6</span>
<span class="VarId">lion</span>	<span class="VarId">f</span>	<span class="Number">4</span>	<span class="Number">3</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">6</span>	<span class="Number">4</span>	<span class="Number">8</span>
<span class="VarId">magic_castle</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>
<span class="VarId">magic_fire</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>
<span class="VarId">magic_tree</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">5</span>	\<span class="VarId">N</span>
<span class="VarId">manticore</span>	<span class="VarId">t</span>	<span class="Number">5</span>	<span class="Number">8</span>	<span class="VarId">f</span>	<span class="VarId">t</span>	<span class="VarId">projectile</span>	<span class="Number">1</span>	<span class="Number">3</span>	<span class="Number">3</span>	<span class="Number">6</span>	<span class="Number">6</span>
<span class="VarId">ogre</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">6</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">4</span>	<span class="Number">7</span>	<span class="Number">3</span>
<span class="VarId">orc</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">4</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">2</span>	<span class="Number">1</span>	<span class="Number">4</span>
<span class="VarId">pegasus</span>	<span class="VarId">t</span>	<span class="Number">5</span>	<span class="Number">7</span>	<span class="VarId">f</span>	<span class="VarId">t</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">2</span>	<span class="Number">4</span>	<span class="Number">6</span>
<span class="VarId">red_dragon</span>	<span class="VarId">t</span>	<span class="Number">3</span>	<span class="Number">5</span>	<span class="VarId">f</span>	<span class="VarId">f</span>	<span class="VarId">fire</span>	<span class="Number">3</span>	<span class="Number">5</span>	<span class="Number">7</span>	<span class="Number">9</span>	<span class="Number">4</span>
<span class="VarId">shadow_tree</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">2</span>	<span class="Number">4</span>	\<span class="VarId">N</span>
<span class="VarId">skeleton</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">4</span>	<span class="VarId">t</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">3</span>	<span class="Number">2</span>	<span class="Number">3</span>
<span class="VarId">spectre</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">4</span>	<span class="VarId">t</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">4</span>	<span class="Number">2</span>	<span class="Number">6</span>
<span class="VarId">unicorn</span>	<span class="VarId">f</span>	<span class="Number">4</span>	<span class="Number">7</span>	<span class="VarId">f</span>	<span class="VarId">t</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">5</span>	<span class="Number">4</span>	<span class="Number">9</span>
<span class="VarId">vampire</span>	<span class="VarId">t</span>	<span class="Number">4</span>	<span class="Number">5</span>	<span class="VarId">t</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">6</span>	<span class="Number">8</span>	<span class="Number">6</span>
<span class="VarId">wall</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>
<span class="VarId">wizard</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">3</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">3</span>	<span class="Number">3</span>	<span class="Number">5</span>
<span class="VarId">wraith</span>	<span class="VarId">f</span>	<span class="Number">2</span>	<span class="Number">5</span>	<span class="VarId">t</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">5</span>	<span class="Number">5</span>	<span class="Number">4</span>
<span class="VarId">zombie</span>	<span class="VarId">f</span>	<span class="Number">1</span>	<span class="Number">3</span>	<span class="VarId">t</span>	<span class="VarId">f</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	\<span class="VarId">N</span>	<span class="Number">1</span>	<span class="Number">1</span>	<span class="Number">2</span>
\<span class="Symbol">.</span>
</pre></div></div></div></div
      ></div
    ><br
     /><br
     /><br
     /><div class="footer"
    >generated on 01/31/11 20:00:52, hssqlppp-0.3.0</div
    ></body
  ></html
>
