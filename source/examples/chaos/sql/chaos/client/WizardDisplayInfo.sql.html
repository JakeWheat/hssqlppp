<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><title
    >WizardDisplayInfo</title
    ><link href="../../../../../../main.css" rel="stylesheet" type="text/css"
     /></head
  ><body
  ><div class="header"
    ><a href="../../../../../../index.txt.html"
      >HsSqlPpp-0.3.0</a
      ></div
    ><br
     /><br
     /><br
     /><div class='sourceCode'><div class='literate'><div class='sql'><pre class="sourceCode">
select module('Chaos.Client.WizardDisplayInfo');


create table colours (
       name text primary key,
       red int,
       green int,
       blue int
);
select set_relvar_type('colours', 'readonly');

copy colours (name,red,green,blue) from stdin;
grid	32767	32767	32767
background	0	0	32767
black	0	0	0
blue	0	0	65535
green	0	65535	0
red	65535	0	0
pink	65535	49407	49407
purple	65535	0	65535
cyan	0	65535	65535
yellow	65535	65535	0
orange	65535	41215	0
grey	32767	32767	32767
white	65535	65535	65535
\.

</pre></div></div></div><p
    >/* == wizard display info</p
    ><p
    >This table associates a wizards name (= the allegiance) from the server with a colour for the wizard and his army and a wizard sprite for display purposes.</p
    ><p
    >The sprite in this table is what the wizard uses if he doesn't have any upgrades.</p
    ><p
    >Wizard named 'name' started with sprite default_sprite, his army is coloured 'colour'. */</p
    ><div class='sourceCode'><div class='literate'><div class='sql'><pre class="sourceCode">

create table wizard_display_info (
  wizard_name text unique references wizards,
  default_sprite text unique references sprites, -- and matches /wizard.* /
  colour text unique
);
select set_relvar_type('wizard_display_info','data');

</pre></div></div></div><p
    >/<em
      >create table init_wizard_display_info_argument ( wizard_name text unique references wizards, sprite text unique references sprites, -- starts with wizard colour text unique --todo: make list of colours ); select set_relvar_type('init_wizard_display_info_argument', 'stack');</em
      >/</p
    ><div class='sourceCode'><div class='literate'><div class='sql'><pre class="sourceCode">

create function init_wizard_display_info(a wizard_display_info[]) returns void as $$
begin
    insert into wizard_display_info (wizard_name, default_sprite,  colour)
       select wizard_name,default_sprite,colour
       from unnest(a);
end;
$$ language plpgsql volatile;

</pre></div></div></div><div id="section"
    ><h1
      >/*</h1
      ><p
      >== action history with colours</p
      ><p
      >create a view to supply grey as colour for corpses (corpses don't have an allegiance)</p
      ><p
      >*/</p
      ><div class='sourceCode'><div class='literate'><div class='sql'><pre class="sourceCode">
create view allegiance_colours as
  select wizard_name as allegiance, colour from wizard_display_info union all
  select 'dead' as allegiance, 'grey' as colour;

create view action_history_colour_mr as
select a.*, colour
  from action_history_mr a
  natural inner join allegiance_colours;
</pre></div></div></div></div
    ><br
     /><br
     /><br
     /><div class="footer"
    >generated on 01/29/11 20:06:46, hssqlppp-0.3.0</div
    ></body
  ></html
>
