<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><title
    >NewGameWidget.sql transformed</title
    ><link href="../../../../../../main.css" rel="stylesheet" type="text/css"
     /></head
  ><body
  ><div class="header"
    ><a href="../../../../../../index.html"
      >HsSqlPpp-0.3.0</a
      ></div
    ><br
     /><br
     /><br
     /><div class='SqlPostgresql'><div class='UnusedSql'><pre class="sourceCode"><span class="Comment">-- replaced sql ------------------------</span>
<span class="Comment">/*</span>
<span class="Comment">================================================================================</span>

<span class="Comment">= new game widget</span>

<span class="Comment">Starting new game involves the following choices:</span>
<span class="Comment">number of wizards (2-8)</span>
<span class="Comment">computer wizards same ai same stats as player</span>
<span class="Comment">for each wizard:</span>
<span class="Comment">    name text - autogenerated, can be changed</span>
<span class="Comment">    computer_controlled bool</span>
<span class="Comment">    sprite and colour displayed but cannot currently be changed</span>

<span class="Comment">to add</span>
<span class="Comment">    AI level for each computer controlled wizard</span>
<span class="Comment">    change playing area size, square or hexagon tiles</span>
<span class="Comment">*/</span>
<span class="Keyword">select</span> <span class="VarId">module</span><span class="Symbol">(</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">);</span>

<span class="Comment">/*</span>
<span class="Comment">== data</span>
<span class="Comment">*/</span></pre></div></div><div class='SqlPostgresql'><div class='GeneratedSql'><pre class="sourceCode"><span class="Comment">-- generated sql ------------------------</span>
<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">modules</span> <span class="Symbol">(</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span></pre></div></div><div class='SqlPostgresql'><pre class="sourceCode"><span class="Comment">/*[CatCreateDomain (DomainType &quot;new_wizard_state&quot;) (ScalarType &quot;text&quot;)]*/</span>
<span class="Keyword">create</span> <span class="Keyword">domain</span> <span class="VarId">new_wizard_state</span> <span class="Keyword">as</span> <span class="VarId">text</span>
  <span class="Keyword">check</span> <span class="Symbol">(</span><span class="VarId">value</span> <span class="VarId">in</span> <span class="Symbol">(</span><span class="Char">'human'</span><span class="Symbol">,</span> <span class="Char">'computer'</span><span class="Symbol">,</span> <span class="Char">'none'</span><span class="Symbol">));</span></pre></div><div class='SqlPostgresql'><div class='GeneratedSql'><pre class="sourceCode"><span class="Comment">-- generated sql ------------------------</span>
<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">all_module_objects</span> <span class="Symbol">(</span><span class="VarId">object_name</span><span class="Symbol">,</span><span class="VarId">object_type</span><span class="Symbol">,</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'new_wizard_state'</span><span class="Symbol">,</span><span class="Char">'domain'</span><span class="Symbol">,</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span></pre></div></div><div class='SqlPostgresql'><div class='UnusedSql'><pre class="sourceCode"><span class="Comment">-- replaced sql ------------------------</span>
<span class="Keyword">create</span> <span class="Keyword">table</span> <span class="VarId">new_game_widget_state</span> <span class="Symbol">(</span>
  <span class="VarId">line</span> <span class="Type">int</span> <span class="Keyword">unique</span><span class="Symbol">,</span>
  <span class="VarId">wizard_name</span> <span class="Type">text</span> <span class="Keyword">unique</span><span class="Symbol">,</span>
  <span class="VarId">sprite</span> <span class="Type">text</span> <span class="Keyword">unique</span> <span class="Keyword">references</span> <span class="VarId">sprites</span><span class="Symbol">,</span>
  <span class="VarId">colour</span> <span class="Type">text</span> <span class="Keyword">unique</span><span class="Symbol">,</span>
  <span class="VarId">state</span> <span class="VarId">new_wizard_state</span>
<span class="Symbol">);</span></pre></div></div><div class='SqlPostgresql'><div class='GeneratedSql'><pre class="sourceCode"><span class="Comment">-- generated sql ------------------------</span>
<span class="Comment">/*[CatCreateTable &quot;new_game_widget_state&quot; [(&quot;line&quot;,ScalarType &quot;int4&quot;),(&quot;wizard_name&quot;,ScalarType &quot;text&quot;),(&quot;sprite&quot;,ScalarType &quot;text&quot;),(&quot;colour&quot;,ScalarType &quot;text&quot;),(&quot;state&quot;,DomainType &quot;new_wizard_state&quot;)] [(&quot;tableoid&quot;,ScalarType &quot;oid&quot;),(&quot;cmax&quot;,ScalarType &quot;cid&quot;),(&quot;xmax&quot;,ScalarType &quot;xid&quot;),(&quot;cmin&quot;,ScalarType &quot;cid&quot;),(&quot;xmin&quot;,ScalarType &quot;xid&quot;),(&quot;ctid&quot;,ScalarType &quot;tid&quot;)]]*/</span>
<span class="Keyword">create</span> <span class="Keyword">table</span> <span class="VarId">new_game_widget_state</span> <span class="Symbol">(</span>
  <span class="VarId">line</span> <span class="Type">int</span> <span class="Keyword">not</span> <span class="Keyword">null</span> <span class="Keyword">unique</span><span class="Symbol">,</span>
  <span class="VarId">wizard_name</span> <span class="Type">text</span> <span class="Keyword">not</span> <span class="Keyword">null</span> <span class="Keyword">unique</span><span class="Symbol">,</span>
  <span class="VarId">sprite</span> <span class="Type">text</span> <span class="Keyword">not</span> <span class="Keyword">null</span> <span class="Keyword">unique</span> <span class="Keyword">references</span> <span class="VarId">sprites</span> <span class="Keyword">on</span> <span class="Keyword">delete</span> <span class="Keyword">cascade</span> <span class="Keyword">on</span> <span class="Keyword">update</span> <span class="Keyword">cascade</span><span class="Symbol">,</span>
  <span class="VarId">colour</span> <span class="Type">text</span> <span class="Keyword">not</span> <span class="Keyword">null</span> <span class="Keyword">unique</span><span class="Symbol">,</span>
  <span class="VarId">state</span> <span class="VarId">new_wizard_state</span> <span class="Keyword">not</span> <span class="VarId">null</span>
<span class="Symbol">);</span>

<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">all_module_objects</span> <span class="Symbol">(</span><span class="VarId">object_name</span><span class="Symbol">,</span><span class="VarId">object_type</span><span class="Symbol">,</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'new_game_widget_state'</span><span class="Symbol">,</span><span class="Char">'table'</span><span class="Symbol">,</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span></pre></div></div><div class='SqlPostgresql'><pre class="sourceCode"><span class="Keyword">select</span> <span class="VarId">set_relvar_type</span><span class="Symbol">(</span><span class="Char">'new_game_widget_state'</span><span class="Symbol">,</span> <span class="Char">'data'</span><span class="Symbol">);</span></pre></div><div class='SqlPostgresql'><div class='UnusedSql'><pre class="sourceCode"><span class="Comment">-- replaced sql ------------------------</span>
<span class="Keyword">select</span> <span class="VarId">create_assertion</span><span class="Symbol">(</span><span class="Char">'new_game_widget_state_line_valid'</span><span class="Symbol">,</span>
' <span class="Keyword">not</span> <span class="Keyword">exists</span><span class="Symbol">(</span><span class="Keyword">select</span> <span class="Number">1</span> <span class="Keyword">from</span> <span class="VarId">new_game_widget_state</span>
  <span class="Keyword">where</span> <span class="VarId">line</span> <span class="Symbol">&gt;=</span> <span class="Number">8</span><span class="Symbol">)</span>'<span class="Symbol">);</span>

<span class="Comment">/*</span>
<span class="Comment">== helpers</span>
<span class="Comment">*/</span></pre></div></div><div class='SqlPostgresql'><div class='GeneratedSql'><pre class="sourceCode"><span class="Comment">-- generated sql ------------------------</span>
<span class="Comment">/*[CatCreateFunction FunName &quot;check_con_new_game_widget_state_line_valid&quot; [] (ScalarType &quot;bool&quot;) False]*/</span>
<span class="Keyword">create</span> <span class="Keyword">function</span> <span class="VarId">check_con_new_game_widget_state_line_valid</span> <span class="Symbol">()</span> <span class="Keyword">returns</span> <span class="Type">bool</span> <span class="Keyword">as</span> $$
<span class="VarId">begin</span>
  <span class="VarId">return</span> <span class="Symbol">(</span><span class="Keyword">not</span> <span class="Symbol">(</span><span class="Keyword">exists</span> <span class="Symbol">(</span><span class="Keyword">select</span> <span class="Number">1</span>
                         <span class="Keyword">from</span> <span class="VarId">new_game_widget_state</span>
                         <span class="Keyword">where</span> <span class="Symbol">(</span><span class="VarId">line</span> <span class="Symbol">&gt;=</span> <span class="Number">8</span><span class="Symbol">))));</span>

<span class="Keyword">end</span><span class="Symbol">;</span>
$$ <span class="Keyword">language</span> <span class="VarId">plpgsql</span> <span class="Keyword">stable</span><span class="Symbol">;</span>

<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">all_module_objects</span> <span class="Symbol">(</span><span class="VarId">object_name</span><span class="Symbol">,</span><span class="VarId">object_type</span><span class="Symbol">,</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'check_con_new_game_widget_state_line_valid'</span><span class="Symbol">,</span><span class="Char">'function'</span><span class="Symbol">,</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span>

<span class="Comment">/*[CatCreateFunction FunName &quot;new_game_widget_state_constraint_trigger_operator&quot; [] (Pseudo Trigger) False]*/</span>
<span class="Keyword">create</span> <span class="Keyword">function</span> <span class="VarId">new_game_widget_state_constraint_trigger_operator</span> <span class="Symbol">()</span> <span class="Keyword">returns</span> <span class="Keyword">trigger</span> <span class="Keyword">as</span> $$
<span class="VarId">begin</span>
  <span class="Keyword">if</span> <span class="Symbol">(</span><span class="Keyword">not</span> <span class="Symbol">(</span><span class="VarId">check_con_new_game_widget_state_line_valid</span><span class="Symbol">()))</span> <span class="VarId">then</span>
       <span class="Keyword">raise</span> <span class="Keyword">exception</span> <span class="Char">'update violates database constraint new_game_widget_state_line_valid'</span><span class="Symbol">;</span>

  <span class="Keyword">end</span> <span class="Keyword">if</span><span class="Symbol">;</span>

  <span class="VarId">return</span> <span class="VarId">OLD</span><span class="Symbol">;</span>

<span class="Keyword">end</span><span class="Symbol">;</span>
$$ <span class="Keyword">language</span> <span class="VarId">plpgsql</span> <span class="Keyword">stable</span><span class="Symbol">;</span>

<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">all_module_objects</span> <span class="Symbol">(</span><span class="VarId">object_name</span><span class="Symbol">,</span><span class="VarId">object_type</span><span class="Symbol">,</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'new_game_widget_state_constraint_trigger_operator'</span><span class="Symbol">,</span><span class="Char">'function'</span><span class="Symbol">,</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span>

<span class="Keyword">create</span> <span class="Keyword">trigger</span> <span class="VarId">new_game_widget_state_constraint_trigger</span> <span class="Keyword">after</span> <span class="Keyword">insert</span> <span class="Keyword">or</span> <span class="Keyword">update</span> <span class="Keyword">or</span> <span class="Keyword">delete</span> <span class="Keyword">on</span> <span class="VarId">new_game_widget_state</span> <span class="Keyword">for</span> <span class="Keyword">statement</span> <span class="Keyword">execute</span> <span class="VarId">procedure</span> <span class="VarId">new_game_widget_state_constraint_trigger_operator</span><span class="Symbol">();</span>

<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">all_module_objects</span> <span class="Symbol">(</span><span class="VarId">object_name</span><span class="Symbol">,</span><span class="VarId">object_type</span><span class="Symbol">,</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'new_game_widget_state_constraint_trigger'</span><span class="Symbol">,</span><span class="Char">'trigger'</span><span class="Symbol">,</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span></pre></div></div><div class='SqlPostgresql'><pre class="sourceCode"><span class="Comment">/*[CatCreateFunction FunName &quot;extract_wizard_state&quot; [ScalarType &quot;text&quot;] (ScalarType &quot;bool&quot;) False]*/</span>
<span class="Keyword">create</span> <span class="Keyword">function</span> <span class="VarId">extract_wizard_state</span><span class="Symbol">(</span><span class="VarId">state</span> <span class="Type">text</span><span class="Symbol">)</span> <span class="Keyword">returns</span> <span class="VarId">boolean</span> <span class="Keyword">as</span> $$
<span class="VarId">declare</span>
  <span class="VarId">ret</span> <span class="VarId">boolean</span><span class="Symbol">;</span>
<span class="VarId">begin</span>
  <span class="Keyword">if</span> <span class="VarId">state</span> <span class="Symbol">=</span> <span class="Char">'human'</span> <span class="VarId">then</span>
    <span class="VarId">ret</span> <span class="Symbol">=</span> <span class="VarId">false</span><span class="Symbol">;</span>
  <span class="Keyword">elseif</span> <span class="VarId">state</span> <span class="Symbol">=</span> <span class="Char">'computer'</span> <span class="VarId">then</span>
    <span class="VarId">ret</span> <span class="Symbol">=</span> <span class="VarId">true</span><span class="Symbol">;</span>
  <span class="VarId">else</span>
    <span class="Keyword">raise</span> <span class="VarId">exception</span>
      <span class="Char">'argument must be human or computer, called with %'</span><span class="Symbol">,</span> <span class="VarId">state</span><span class="Symbol">;</span>
  <span class="Keyword">end</span> <span class="Keyword">if</span><span class="Symbol">;</span>
  <span class="VarId">return</span> <span class="VarId">ret</span><span class="Symbol">;</span>
<span class="VarId">end</span>
$$ <span class="Keyword">language</span> <span class="VarId">plpgsql</span> <span class="Keyword">immutable</span><span class="Symbol">;</span></pre></div><div class='SqlPostgresql'><div class='GeneratedSql'><pre class="sourceCode"><span class="Comment">-- generated sql ------------------------</span>
<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">all_module_objects</span> <span class="Symbol">(</span><span class="VarId">object_name</span><span class="Symbol">,</span><span class="VarId">object_type</span><span class="Symbol">,</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'extract_wizard_state'</span><span class="Symbol">,</span><span class="Char">'function'</span><span class="Symbol">,</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span></pre></div></div><div class='SqlPostgresql'><pre class="sourceCode"><span class="Comment">/*[CatCreateFunction FunName &quot;action_reset_new_game_widget_state&quot; [] (Pseudo Void) False]*/</span>
<span class="Keyword">create</span> <span class="Keyword">function</span> <span class="VarId">action_reset_new_game_widget_state</span><span class="Symbol">()</span> <span class="Keyword">returns</span> <span class="Type">void</span> <span class="Keyword">as</span> $$
<span class="VarId">begin</span>
    <span class="Keyword">delete</span> <span class="Keyword">from</span> <span class="VarId">new_game_widget_state</span><span class="Symbol">;</span>
    <span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">new_game_widget_state</span>
      <span class="Symbol">(</span><span class="VarId">line</span><span class="Symbol">,</span> <span class="VarId">wizard_name</span><span class="Symbol">,</span> <span class="VarId">sprite</span><span class="Symbol">,</span> <span class="VarId">colour</span><span class="Symbol">,</span> <span class="VarId">state</span><span class="Symbol">)</span> <span class="VarId">values</span>
      <span class="Symbol">(</span><span class="Number">0</span><span class="Symbol">,</span> <span class="Char">'Buddha'</span><span class="Symbol">,</span> <span class="Char">'wizard0'</span><span class="Symbol">,</span> <span class="Char">'blue'</span><span class="Symbol">,</span> <span class="Char">'human'</span><span class="Symbol">),</span>
      <span class="Symbol">(</span><span class="Number">1</span><span class="Symbol">,</span> <span class="Char">'Kong Fuzi'</span><span class="Symbol">,</span> <span class="Char">'wizard1'</span><span class="Symbol">,</span> <span class="Char">'purple'</span><span class="Symbol">,</span> <span class="Char">'computer'</span><span class="Symbol">),</span>
      <span class="Symbol">(</span><span class="Number">2</span><span class="Symbol">,</span> <span class="Char">'Laozi'</span><span class="Symbol">,</span> <span class="Char">'wizard2'</span><span class="Symbol">,</span> <span class="Char">'cyan'</span><span class="Symbol">,</span> <span class="Char">'computer'</span><span class="Symbol">),</span>
      <span class="Symbol">(</span><span class="Number">3</span><span class="Symbol">,</span> <span class="Char">'Moshe'</span><span class="Symbol">,</span> <span class="Char">'wizard3'</span><span class="Symbol">,</span> <span class="Char">'yellow'</span><span class="Symbol">,</span> <span class="Char">'computer'</span><span class="Symbol">),</span>
      <span class="Symbol">(</span><span class="Number">4</span><span class="Symbol">,</span> <span class="Char">'Muhammad'</span><span class="Symbol">,</span> <span class="Char">'wizard4'</span><span class="Symbol">,</span> <span class="Char">'green'</span><span class="Symbol">,</span> <span class="Char">'computer'</span><span class="Symbol">),</span>
      <span class="Symbol">(</span><span class="Number">5</span><span class="Symbol">,</span> <span class="Char">'Shiva'</span><span class="Symbol">,</span> <span class="Char">'wizard5'</span><span class="Symbol">,</span> <span class="Char">'red'</span><span class="Symbol">,</span> <span class="Char">'computer'</span><span class="Symbol">),</span>
      <span class="Symbol">(</span><span class="Number">6</span><span class="Symbol">,</span> <span class="Char">'Yeshua'</span><span class="Symbol">,</span> <span class="Char">'wizard6'</span><span class="Symbol">,</span> <span class="Char">'white'</span><span class="Symbol">,</span> <span class="Char">'computer'</span><span class="Symbol">),</span>
      <span class="Symbol">(</span><span class="Number">7</span><span class="Symbol">,</span> <span class="Char">'Zarathushthra'</span><span class="Symbol">,</span> <span class="Char">'wizard7'</span><span class="Symbol">,</span> <span class="Char">'orange'</span><span class="Symbol">,</span> <span class="Char">'computer'</span><span class="Symbol">);</span>
<span class="VarId">end</span>
$$ <span class="Keyword">language</span> <span class="VarId">plpgsql</span> <span class="Keyword">volatile</span><span class="Symbol">;</span>

<span class="Comment">/*</span>
<span class="Comment">== actions</span>
<span class="Comment">*/</span></pre></div><div class='SqlPostgresql'><div class='GeneratedSql'><pre class="sourceCode"><span class="Comment">-- generated sql ------------------------</span>
<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">all_module_objects</span> <span class="Symbol">(</span><span class="VarId">object_name</span><span class="Symbol">,</span><span class="VarId">object_type</span><span class="Symbol">,</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'action_reset_new_game_widget_state'</span><span class="Symbol">,</span><span class="Char">'function'</span><span class="Symbol">,</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span></pre></div></div><div class='SqlPostgresql'><pre class="sourceCode"><span class="Keyword">create</span> <span class="Keyword">function</span> <span class="VarId">action_client_new_game_using_new_game_widget_state</span><span class="Symbol">()</span>
  <span class="Keyword">returns</span> <span class="Type">void</span> <span class="Keyword">as</span> $$
<span class="VarId">begin</span>
  <span class="Comment">/*delete from action_client_new_game_argument;</span>
<span class="Comment">  insert into action_client_new_game_argument</span>
<span class="Comment">    (place, wizard_name, sprite, colour, computer_controlled)</span>
<span class="Comment">    select line, wizard_name, sprite, colour,</span>
<span class="Comment">      case when state = 'computer' then true</span>
<span class="Comment">           else false end</span>
<span class="Comment">      from new_game_widget_state</span>
<span class="Comment">      where state != 'none';*/</span>

  <span class="Keyword">perform</span> <span class="VarId">action_client_new_game</span><span class="Symbol">(</span>
    <span class="Symbol">(</span><span class="Keyword">select</span> <span class="VarId">array_agg</span><span class="Symbol">((</span><span class="VarId">line</span><span class="Symbol">,</span><span class="VarId">wizard_name</span><span class="Symbol">,</span><span class="VarId">sprite</span><span class="Symbol">,</span><span class="VarId">colour</span><span class="Symbol">,</span>
                      <span class="Keyword">case</span> <span class="Keyword">when</span> <span class="VarId">state</span> <span class="Symbol">=</span> <span class="Char">'computer'</span> <span class="Keyword">then</span> <span class="VarId">true</span>
                        <span class="Keyword">else</span> <span class="VarId">false</span> <span class="Keyword">end</span><span class="Symbol">)::</span><span class="VarId">client_new_game_t</span><span class="Symbol">)</span>
     <span class="Keyword">from</span> <span class="VarId">new_game_widget_state</span><span class="Symbol">));</span>
<span class="VarId">end</span>
$$ <span class="Keyword">language</span> <span class="VarId">plpgsql</span> <span class="Keyword">volatile</span><span class="Symbol">;</span>

<span class="Comment">/*</span>

<span class="Comment">================================================================================</span>

<span class="Comment">= info widget (split?)</span>

<span class="Comment">turn phase spell, cursor info &amp; highlight key, cursor &amp; selected piece info</span>

<span class="Comment">================================================================================</span>

<span class="Comment">= planned widget notes:</span>

<span class="Comment">== help widget</span>
<span class="Comment">=== controls</span>
<span class="Comment">=== tutorials/ examples</span>
<span class="Comment">=== rules reference</span>
<span class="Comment">== spell info, monster info - reference widget</span>
<span class="Comment">== wizard army widget</span>
<span class="Comment">== versioning access widget</span>
<span class="Comment">== action history widget</span>
<span class="Comment">== game manager widget</span>
<span class="Comment">== power/ debugger widget</span></pre></div><div class='SqlPostgresql'><div class='GeneratedSql'><pre class="sourceCode"><span class="Comment">-- generated sql ------------------------</span>
<span class="Comment">/*[CatCreateFunction FunName &quot;action_client_new_game_using_new_game_widget_state&quot; [] (Pseudo Void) False]*/</span>
<span class="Keyword">create</span> <span class="Keyword">function</span> <span class="VarId">action_client_new_game_using_new_game_widget_state</span> <span class="Symbol">()</span> <span class="Keyword">returns</span> <span class="Type">void</span> <span class="Keyword">as</span> $$
<span class="VarId">begin</span>
  <span class="Keyword">perform</span> <span class="VarId">action_client_new_game</span><span class="Symbol">((</span><span class="Keyword">select</span> <span class="VarId">array_agg</span><span class="Symbol">(</span><span class="VarId">cast</span><span class="Symbol">(</span><span class="Keyword">row</span><span class="Symbol">(</span><span class="VarId">line</span><span class="Symbol">,</span><span class="VarId">wizard_name</span><span class="Symbol">,</span><span class="VarId">sprite</span><span class="Symbol">,</span><span class="VarId">colour</span><span class="Symbol">,</span><span class="VarId">case</span>
                                                                                             <span class="Keyword">when</span> <span class="Symbol">(</span><span class="VarId">state</span> <span class="Symbol">=</span> <span class="Char">'computer'</span><span class="Symbol">)</span> <span class="Keyword">then</span> <span class="VarId">true</span>
                                                                                             <span class="Keyword">else</span> <span class="VarId">false</span>
                                                                                           <span class="Keyword">end</span><span class="Symbol">)</span> <span class="Keyword">as</span> <span class="VarId">client_new_game_t</span><span class="Symbol">))</span>
                                    <span class="Keyword">from</span> <span class="VarId">new_game_widget_state</span><span class="Symbol">));</span>

<span class="Keyword">end</span><span class="Symbol">;</span>
$$ <span class="Keyword">language</span> <span class="VarId">plpgsql</span> <span class="Keyword">volatile</span><span class="Symbol">;</span>

<span class="Comment">/*([],[])*/</span>
<span class="Keyword">insert</span> <span class="Keyword">into</span> <span class="VarId">all_module_objects</span> <span class="Symbol">(</span><span class="VarId">object_name</span><span class="Symbol">,</span><span class="VarId">object_type</span><span class="Symbol">,</span><span class="VarId">module_name</span><span class="Symbol">)</span>
<span class="VarId">values</span>
  <span class="Symbol">(</span><span class="Char">'action_client_new_game_using_new_game_widget_state'</span><span class="Symbol">,</span><span class="Char">'function'</span><span class="Symbol">,</span><span class="Char">'Chaos.Client.NewGameWidget'</span><span class="Symbol">)</span>
<span class="Symbol">;</span></pre></div></div><br
     /><br
     /><br
     /><div class="footer"
    >generated on 01/31/11 20:00:52, hssqlppp-0.3.0</div
    ></body
  ></html
>
